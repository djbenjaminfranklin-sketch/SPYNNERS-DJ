{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"./auth-utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":39},"end":{"line":2,"column":49,"index":88}}],"key":"7tDlZQ/XN5DIg73pnBu6jGNxq9c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.RoomsSocket = RoomsSocket;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _socketIoClient = require(_dependencyMap[1], \"socket.io-client\");\n  var _authUtilsJs = require(_dependencyMap[2], \"./auth-utils.js\");\n  function initializeSocket(config, handlers) {\n    var _a;\n    var socket = (0, _socketIoClient.io)(config.serverUrl, {\n      path: config.mountPath,\n      transports: config.transports,\n      query: {\n        app_id: config.appId,\n        token: (_a = config.token) !== null && _a !== void 0 ? _a : (0, _authUtilsJs.getAccessToken)()\n      }\n    });\n    socket.on(\"connect\", /*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      var _a;\n      console.log(\"connect\", socket.id);\n      return (_a = handlers.connect) === null || _a === void 0 ? void 0 : _a.call(handlers);\n    }));\n    socket.on(\"update_model\", /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (msg) {\n        var _a;\n        return (_a = handlers.update_model) === null || _a === void 0 ? void 0 : _a.call(handlers, msg);\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    socket.on(\"error\", /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (error) {\n        var _a;\n        return (_a = handlers.error) === null || _a === void 0 ? void 0 : _a.call(handlers, error);\n      });\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n    socket.on(\"connect_error\", /*#__PURE__*/function () {\n      var _ref4 = (0, _asyncToGenerator.default)(function* (error) {\n        var _a;\n        console.error(\"connect_error\", error);\n        return (_a = handlers.error) === null || _a === void 0 ? void 0 : _a.call(handlers, error);\n      });\n      return function (_x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n    return socket;\n  }\n  function RoomsSocket(_ref5) {\n    var config = _ref5.config;\n    var currentConfig = {\n      ...config\n    };\n    var roomsToListeners = {};\n    var handlers = {\n      connect: function () {\n        var _ref6 = (0, _asyncToGenerator.default)(function* () {\n          var promises = [];\n          Object.keys(roomsToListeners).forEach(room => {\n            joinRoom(room);\n            var listeners = getListeners(room);\n            listeners === null || listeners === void 0 ? void 0 : listeners.forEach(_ref7 => {\n              var connect = _ref7.connect;\n              var promise = /*#__PURE__*/function () {\n                var _ref8 = (0, _asyncToGenerator.default)(function* () {\n                  return connect === null || connect === void 0 ? void 0 : connect();\n                });\n                return function promise() {\n                  return _ref8.apply(this, arguments);\n                };\n              }();\n              promises.push(promise());\n            });\n          });\n          yield Promise.all(promises);\n        });\n        return function connect() {\n          return _ref6.apply(this, arguments);\n        };\n      }(),\n      update_model: function () {\n        var _ref9 = (0, _asyncToGenerator.default)(function* (msg) {\n          var listeners = getListeners(msg.room);\n          var promises = listeners.map(listener => {\n            var _a;\n            return (_a = listener.update_model) === null || _a === void 0 ? void 0 : _a.call(listener, msg);\n          });\n          yield Promise.all(promises);\n        });\n        return function update_model(_x4) {\n          return _ref9.apply(this, arguments);\n        };\n      }(),\n      error: function () {\n        var _ref0 = (0, _asyncToGenerator.default)(function* (_error) {\n          console.error(\"error\", _error);\n          var promises = Object.values(roomsToListeners).flat().map(listener => {\n            var _a;\n            return (_a = listener.error) === null || _a === void 0 ? void 0 : _a.call(listener, _error);\n          });\n          yield Promise.all(promises);\n        });\n        return function error(_x5) {\n          return _ref0.apply(this, arguments);\n        };\n      }()\n    };\n    var socket = initializeSocket(config, handlers);\n    function cleanup() {\n      disconnect();\n    }\n    function disconnect() {\n      if (socket) {\n        socket.disconnect();\n      }\n    }\n    function updateConfig(config) {\n      cleanup();\n      currentConfig = {\n        ...currentConfig,\n        ...config\n      };\n      socket = initializeSocket(currentConfig, handlers);\n    }\n    function joinRoom(room) {\n      socket.emit(\"join\", room);\n    }\n    function leaveRoom(room) {\n      socket.emit(\"leave\", room);\n    }\n    function updateModel(_x6, _x7) {\n      return _updateModel.apply(this, arguments);\n    }\n    function _updateModel() {\n      _updateModel = (0, _asyncToGenerator.default)(function* (room, data) {\n        var _a;\n        var dataStr = JSON.stringify(data);\n        return (_a = handlers.update_model) === null || _a === void 0 ? void 0 : _a.call(handlers, {\n          room,\n          data: dataStr\n        });\n      });\n      return _updateModel.apply(this, arguments);\n    }\n    function getListeners(room) {\n      return roomsToListeners[room];\n    }\n    var subscribeToRoom = (room, handlers) => {\n      if (!roomsToListeners[room]) {\n        joinRoom(room);\n        roomsToListeners[room] = [];\n      }\n      roomsToListeners[room].push(handlers);\n      return () => {\n        var _a, _b;\n        roomsToListeners[room] = (_b = (_a = roomsToListeners[room]) === null || _a === void 0 ? void 0 : _a.filter(listener => listener !== handlers)) !== null && _b !== void 0 ? _b : [];\n        if (roomsToListeners[room].length === 0) {\n          leaveRoom(room);\n        }\n      };\n    };\n    return {\n      socket,\n      subscribeToRoom,\n      updateConfig,\n      updateModel,\n      disconnect\n    };\n  }\n});","lineCount":183,"map":[[12,2,33,0,"exports"],[12,9,33,0],[12,10,33,0,"RoomsSocket"],[12,21,33,0],[12,24,33,0,"RoomsSocket"],[12,35,33,0],[13,2,115,1],[13,6,115,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,115,1],[13,45,115,1,"require"],[13,52,115,1],[13,53,115,1,"_dependencyMap"],[13,67,115,1],[14,2,115,1],[14,6,115,1,"_asyncToGenerator"],[14,23,115,1],[14,26,115,1,"_interopDefault"],[14,41,115,1],[14,42,115,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,115,1],[15,2,1,0],[15,6,1,0,"_socketIoClient"],[15,21,1,0],[15,24,1,0,"require"],[15,31,1,0],[15,32,1,0,"_dependencyMap"],[15,46,1,0],[16,2,2,0],[16,6,2,0,"_authUtilsJs"],[16,18,2,0],[16,21,2,0,"require"],[16,28,2,0],[16,29,2,0,"_dependencyMap"],[16,43,2,0],[17,2,3,0],[17,11,3,9,"initializeSocket"],[17,27,3,25,"initializeSocket"],[17,28,3,26,"config"],[17,34,3,32],[17,36,3,34,"handlers"],[17,44,3,42],[17,46,3,44],[18,4,4,4],[18,8,4,8,"_a"],[18,10,4,10],[19,4,5,4],[19,8,5,10,"socket"],[19,14,5,16],[19,17,5,19],[19,21,5,19,"io"],[19,36,5,21],[19,37,5,21,"io"],[19,39,5,21],[19,41,5,22,"config"],[19,47,5,28],[19,48,5,29,"serverUrl"],[19,57,5,38],[19,59,5,40],[20,6,6,8,"path"],[20,10,6,12],[20,12,6,14,"config"],[20,18,6,20],[20,19,6,21,"mountPath"],[20,28,6,30],[21,6,7,8,"transports"],[21,16,7,18],[21,18,7,20,"config"],[21,24,7,26],[21,25,7,27,"transports"],[21,35,7,37],[22,6,8,8,"query"],[22,11,8,13],[22,13,8,15],[23,8,9,12,"app_id"],[23,14,9,18],[23,16,9,20,"config"],[23,22,9,26],[23,23,9,27,"appId"],[23,28,9,32],[24,8,10,12,"token"],[24,13,10,17],[24,15,10,19],[24,16,10,20,"_a"],[24,18,10,22],[24,21,10,25,"config"],[24,27,10,31],[24,28,10,32,"token"],[24,33,10,37],[24,39,10,43],[24,43,10,47],[24,47,10,51,"_a"],[24,49,10,53],[24,54,10,58],[24,59,10,63],[24,60,10,64],[24,63,10,67,"_a"],[24,65,10,69],[24,68,10,72],[24,72,10,72,"getAccessToken"],[24,84,10,86],[24,85,10,86,"getAccessToken"],[24,99,10,86],[24,101,10,87],[25,6,11,8],[26,4,12,4],[26,5,12,5],[26,6,12,6],[27,4,13,4,"socket"],[27,10,13,10],[27,11,13,11,"on"],[27,13,13,13],[27,14,13,14],[27,23,13,23],[27,42,13,23,"_asyncToGenerator"],[27,59,13,23],[27,60,13,23,"default"],[27,67,13,23],[27,69,13,25],[27,82,13,37],[28,6,14,8],[28,10,14,12,"_a"],[28,12,14,14],[29,6,15,8,"console"],[29,13,15,15],[29,14,15,16,"log"],[29,17,15,19],[29,18,15,20],[29,27,15,29],[29,29,15,31,"socket"],[29,35,15,37],[29,36,15,38,"id"],[29,38,15,40],[29,39,15,41],[30,6,16,8],[30,13,16,15],[30,14,16,16,"_a"],[30,16,16,18],[30,19,16,21,"handlers"],[30,27,16,29],[30,28,16,30,"connect"],[30,35,16,37],[30,41,16,43],[30,45,16,47],[30,49,16,51,"_a"],[30,51,16,53],[30,56,16,58],[30,61,16,63],[30,62,16,64],[30,65,16,67],[30,70,16,72],[30,71,16,73],[30,74,16,76,"_a"],[30,76,16,78],[30,77,16,79,"call"],[30,81,16,83],[30,82,16,84,"handlers"],[30,90,16,92],[30,91,16,93],[31,4,17,4],[31,5,17,5],[31,7,17,6],[32,4,18,4,"socket"],[32,10,18,10],[32,11,18,11,"on"],[32,13,18,13],[32,14,18,14],[32,28,18,28],[33,6,18,28],[33,10,18,28,"_ref2"],[33,15,18,28],[33,22,18,28,"_asyncToGenerator"],[33,39,18,28],[33,40,18,28,"default"],[33,47,18,28],[33,49,18,30],[33,60,18,37,"msg"],[33,63,18,40],[33,65,18,45],[34,8,19,8],[34,12,19,12,"_a"],[34,14,19,14],[35,8,20,8],[35,15,20,15],[35,16,20,16,"_a"],[35,18,20,18],[35,21,20,21,"handlers"],[35,29,20,29],[35,30,20,30,"update_model"],[35,42,20,42],[35,48,20,48],[35,52,20,52],[35,56,20,56,"_a"],[35,58,20,58],[35,63,20,63],[35,68,20,68],[35,69,20,69],[35,72,20,72],[35,77,20,77],[35,78,20,78],[35,81,20,81,"_a"],[35,83,20,83],[35,84,20,84,"call"],[35,88,20,88],[35,89,20,89,"handlers"],[35,97,20,97],[35,99,20,99,"msg"],[35,102,20,102],[35,103,20,103],[36,6,21,4],[36,7,21,5],[37,6,21,5],[37,23,21,5,"_x"],[37,25,21,5],[38,8,21,5],[38,15,21,5,"_ref2"],[38,20,21,5],[38,21,21,5,"apply"],[38,26,21,5],[38,33,21,5,"arguments"],[38,42,21,5],[39,6,21,5],[40,4,21,5],[40,8,21,6],[41,4,22,4,"socket"],[41,10,22,10],[41,11,22,11,"on"],[41,13,22,13],[41,14,22,14],[41,21,22,21],[42,6,22,21],[42,10,22,21,"_ref3"],[42,15,22,21],[42,22,22,21,"_asyncToGenerator"],[42,39,22,21],[42,40,22,21,"default"],[42,47,22,21],[42,49,22,23],[42,60,22,30,"error"],[42,65,22,35],[42,67,22,40],[43,8,23,8],[43,12,23,12,"_a"],[43,14,23,14],[44,8,24,8],[44,15,24,15],[44,16,24,16,"_a"],[44,18,24,18],[44,21,24,21,"handlers"],[44,29,24,29],[44,30,24,30,"error"],[44,35,24,35],[44,41,24,41],[44,45,24,45],[44,49,24,49,"_a"],[44,51,24,51],[44,56,24,56],[44,61,24,61],[44,62,24,62],[44,65,24,65],[44,70,24,70],[44,71,24,71],[44,74,24,74,"_a"],[44,76,24,76],[44,77,24,77,"call"],[44,81,24,81],[44,82,24,82,"handlers"],[44,90,24,90],[44,92,24,92,"error"],[44,97,24,97],[44,98,24,98],[45,6,25,4],[45,7,25,5],[46,6,25,5],[46,23,25,5,"_x2"],[46,26,25,5],[47,8,25,5],[47,15,25,5,"_ref3"],[47,20,25,5],[47,21,25,5,"apply"],[47,26,25,5],[47,33,25,5,"arguments"],[47,42,25,5],[48,6,25,5],[49,4,25,5],[49,8,25,6],[50,4,26,4,"socket"],[50,10,26,10],[50,11,26,11,"on"],[50,13,26,13],[50,14,26,14],[50,29,26,29],[51,6,26,29],[51,10,26,29,"_ref4"],[51,15,26,29],[51,22,26,29,"_asyncToGenerator"],[51,39,26,29],[51,40,26,29,"default"],[51,47,26,29],[51,49,26,31],[51,60,26,38,"error"],[51,65,26,43],[51,67,26,48],[52,8,27,8],[52,12,27,12,"_a"],[52,14,27,14],[53,8,28,8,"console"],[53,15,28,15],[53,16,28,16,"error"],[53,21,28,21],[53,22,28,22],[53,37,28,37],[53,39,28,39,"error"],[53,44,28,44],[53,45,28,45],[54,8,29,8],[54,15,29,15],[54,16,29,16,"_a"],[54,18,29,18],[54,21,29,21,"handlers"],[54,29,29,29],[54,30,29,30,"error"],[54,35,29,35],[54,41,29,41],[54,45,29,45],[54,49,29,49,"_a"],[54,51,29,51],[54,56,29,56],[54,61,29,61],[54,62,29,62],[54,65,29,65],[54,70,29,70],[54,71,29,71],[54,74,29,74,"_a"],[54,76,29,76],[54,77,29,77,"call"],[54,81,29,81],[54,82,29,82,"handlers"],[54,90,29,90],[54,92,29,92,"error"],[54,97,29,97],[54,98,29,98],[55,6,30,4],[55,7,30,5],[56,6,30,5],[56,23,30,5,"_x3"],[56,26,30,5],[57,8,30,5],[57,15,30,5,"_ref4"],[57,20,30,5],[57,21,30,5,"apply"],[57,26,30,5],[57,33,30,5,"arguments"],[57,42,30,5],[58,6,30,5],[59,4,30,5],[59,8,30,6],[60,4,31,4],[60,11,31,11,"socket"],[60,17,31,17],[61,2,32,0],[62,2,33,7],[62,11,33,16,"RoomsSocket"],[62,22,33,27,"RoomsSocket"],[62,23,33,27,"_ref5"],[62,28,33,27],[62,30,33,40],[63,4,33,40],[63,8,33,30,"config"],[63,14,33,36],[63,17,33,36,"_ref5"],[63,22,33,36],[63,23,33,30,"config"],[63,29,33,36],[64,4,34,4],[64,8,34,8,"currentConfig"],[64,21,34,21],[64,24,34,24],[65,6,34,26],[65,9,34,29,"config"],[66,4,34,36],[66,5,34,37],[67,4,35,4],[67,8,35,10,"roomsToListeners"],[67,24,35,26],[67,27,35,29],[67,28,35,30],[67,29,35,31],[68,4,36,4],[68,8,36,10,"handlers"],[68,16,36,18],[68,19,36,21],[69,6,37,8,"connect"],[69,13,37,15],[70,8,37,15],[70,12,37,15,"_ref6"],[70,17,37,15],[70,24,37,15,"_asyncToGenerator"],[70,41,37,15],[70,42,37,15,"default"],[70,49,37,15],[70,51,37,17],[70,64,37,29],[71,10,38,12],[71,14,38,18,"promises"],[71,22,38,26],[71,25,38,29],[71,27,38,31],[72,10,39,12,"Object"],[72,16,39,18],[72,17,39,19,"keys"],[72,21,39,23],[72,22,39,24,"roomsToListeners"],[72,38,39,40],[72,39,39,41],[72,40,39,42,"forEach"],[72,47,39,49],[72,48,39,51,"room"],[72,52,39,55],[72,56,39,60],[73,12,40,16,"joinRoom"],[73,20,40,24],[73,21,40,25,"room"],[73,25,40,29],[73,26,40,30],[74,12,41,16],[74,16,41,22,"listeners"],[74,25,41,31],[74,28,41,34,"getListeners"],[74,40,41,46],[74,41,41,47,"room"],[74,45,41,51],[74,46,41,52],[75,12,42,16,"listeners"],[75,21,42,25],[75,26,42,30],[75,30,42,34],[75,34,42,38,"listeners"],[75,43,42,47],[75,48,42,52],[75,53,42,57],[75,54,42,58],[75,57,42,61],[75,62,42,66],[75,63,42,67],[75,66,42,70,"listeners"],[75,75,42,79],[75,76,42,80,"forEach"],[75,83,42,87],[75,84,42,88,"_ref7"],[75,89,42,88],[75,93,42,105],[76,14,42,105],[76,18,42,91,"connect"],[76,25,42,98],[76,28,42,98,"_ref7"],[76,33,42,98],[76,34,42,91,"connect"],[76,41,42,98],[77,14,43,20],[77,18,43,26,"promise"],[77,25,43,33],[78,16,43,33],[78,20,43,33,"_ref8"],[78,25,43,33],[78,32,43,33,"_asyncToGenerator"],[78,49,43,33],[78,50,43,33,"default"],[78,57,43,33],[78,59,43,36],[79,18,43,36],[79,25,43,48,"connect"],[79,32,43,55],[79,37,43,60],[79,41,43,64],[79,45,43,68,"connect"],[79,52,43,75],[79,57,43,80],[79,62,43,85],[79,63,43,86],[79,66,43,89],[79,71,43,94],[79,72,43,95],[79,75,43,98,"connect"],[79,82,43,105],[79,83,43,106],[79,84,43,107],[80,16,43,107],[81,16,43,107],[81,32,43,26,"promise"],[81,39,43,33,"promise"],[81,40,43,33],[82,18,43,33],[82,25,43,33,"_ref8"],[82,30,43,33],[82,31,43,33,"apply"],[82,36,43,33],[82,43,43,33,"arguments"],[82,52,43,33],[83,16,43,33],[84,14,43,33],[84,17,43,107],[85,14,44,20,"promises"],[85,22,44,28],[85,23,44,29,"push"],[85,27,44,33],[85,28,44,34,"promise"],[85,35,44,41],[85,36,44,42],[85,37,44,43],[85,38,44,44],[86,12,45,16],[86,13,45,17],[86,14,45,18],[87,10,46,12],[87,11,46,13],[87,12,46,14],[88,10,47,12],[88,16,47,18,"Promise"],[88,23,47,25],[88,24,47,26,"all"],[88,27,47,29],[88,28,47,30,"promises"],[88,36,47,38],[88,37,47,39],[89,8,48,8],[89,9,48,9],[90,8,48,9],[90,24,37,8,"connect"],[90,31,37,15,"connect"],[90,32,37,15],[91,10,37,15],[91,17,37,15,"_ref6"],[91,22,37,15],[91,23,37,15,"apply"],[91,28,37,15],[91,35,37,15,"arguments"],[91,44,37,15],[92,8,37,15],[93,6,37,15],[93,9,48,9],[94,6,49,8,"update_model"],[94,18,49,20],[95,8,49,20],[95,12,49,20,"_ref9"],[95,17,49,20],[95,24,49,20,"_asyncToGenerator"],[95,41,49,20],[95,42,49,20,"default"],[95,49,49,20],[95,51,49,22],[95,62,49,29,"msg"],[95,65,49,32],[95,67,49,37],[96,10,50,12],[96,14,50,18,"listeners"],[96,23,50,27],[96,26,50,30,"getListeners"],[96,38,50,42],[96,39,50,43,"msg"],[96,42,50,46],[96,43,50,47,"room"],[96,47,50,51],[96,48,50,52],[97,10,51,12],[97,14,51,18,"promises"],[97,22,51,26],[97,25,51,29,"listeners"],[97,34,51,38],[97,35,51,39,"map"],[97,38,51,42],[97,39,51,44,"listener"],[97,47,51,52],[97,51,51,57],[98,12,51,59],[98,16,51,63,"_a"],[98,18,51,65],[99,12,51,67],[99,19,51,74],[99,20,51,75,"_a"],[99,22,51,77],[99,25,51,80,"listener"],[99,33,51,88],[99,34,51,89,"update_model"],[99,46,51,101],[99,52,51,107],[99,56,51,111],[99,60,51,115,"_a"],[99,62,51,117],[99,67,51,122],[99,72,51,127],[99,73,51,128],[99,76,51,131],[99,81,51,136],[99,82,51,137],[99,85,51,140,"_a"],[99,87,51,142],[99,88,51,143,"call"],[99,92,51,147],[99,93,51,148,"listener"],[99,101,51,156],[99,103,51,158,"msg"],[99,106,51,161],[99,107,51,162],[100,10,51,164],[100,11,51,165],[100,12,51,166],[101,10,52,12],[101,16,52,18,"Promise"],[101,23,52,25],[101,24,52,26,"all"],[101,27,52,29],[101,28,52,30,"promises"],[101,36,52,38],[101,37,52,39],[102,8,53,8],[102,9,53,9],[103,8,53,9],[103,24,49,8,"update_model"],[103,36,49,20,"update_model"],[103,37,49,20,"_x4"],[103,40,49,20],[104,10,49,20],[104,17,49,20,"_ref9"],[104,22,49,20],[104,23,49,20,"apply"],[104,28,49,20],[104,35,49,20,"arguments"],[104,44,49,20],[105,8,49,20],[106,6,49,20],[106,9,53,9],[107,6,54,8,"error"],[107,11,54,13],[108,8,54,13],[108,12,54,13,"_ref0"],[108,17,54,13],[108,24,54,13,"_asyncToGenerator"],[108,41,54,13],[108,42,54,13,"default"],[108,49,54,13],[108,51,54,15],[108,62,54,22,"error"],[108,68,54,27],[108,70,54,32],[109,10,55,12,"console"],[109,17,55,19],[109,18,55,20,"error"],[109,23,55,25],[109,24,55,26],[109,31,55,33],[109,33,55,35,"error"],[109,39,55,40],[109,40,55,41],[110,10,56,12],[110,14,56,18,"promises"],[110,22,56,26],[110,25,56,29,"Object"],[110,31,56,35],[110,32,56,36,"values"],[110,38,56,42],[110,39,56,43,"roomsToListeners"],[110,55,56,59],[110,56,56,60],[110,57,57,17,"flat"],[110,61,57,21],[110,62,57,22],[110,63,57,23],[110,64,58,17,"map"],[110,67,58,20],[110,68,58,22,"listener"],[110,76,58,30],[110,80,58,35],[111,12,58,37],[111,16,58,41,"_a"],[111,18,58,43],[112,12,58,45],[112,19,58,52],[112,20,58,53,"_a"],[112,22,58,55],[112,25,58,58,"listener"],[112,33,58,66],[112,34,58,67,"error"],[112,39,58,72],[112,45,58,78],[112,49,58,82],[112,53,58,86,"_a"],[112,55,58,88],[112,60,58,93],[112,65,58,98],[112,66,58,99],[112,69,58,102],[112,74,58,107],[112,75,58,108],[112,78,58,111,"_a"],[112,80,58,113],[112,81,58,114,"call"],[112,85,58,118],[112,86,58,119,"listener"],[112,94,58,127],[112,96,58,129,"error"],[112,102,58,134],[112,103,58,135],[113,10,58,137],[113,11,58,138],[113,12,58,139],[114,10,59,12],[114,16,59,18,"Promise"],[114,23,59,25],[114,24,59,26,"all"],[114,27,59,29],[114,28,59,30,"promises"],[114,36,59,38],[114,37,59,39],[115,8,60,8],[115,9,60,9],[116,8,60,9],[116,24,54,8,"error"],[116,29,54,13,"error"],[116,30,54,13,"_x5"],[116,33,54,13],[117,10,54,13],[117,17,54,13,"_ref0"],[117,22,54,13],[117,23,54,13,"apply"],[117,28,54,13],[117,35,54,13,"arguments"],[117,44,54,13],[118,8,54,13],[119,6,54,13],[120,4,61,4],[120,5,61,5],[121,4,62,4],[121,8,62,8,"socket"],[121,14,62,14],[121,17,62,17,"initializeSocket"],[121,33,62,33],[121,34,62,34,"config"],[121,40,62,40],[121,42,62,42,"handlers"],[121,50,62,50],[121,51,62,51],[122,4,63,4],[122,13,63,13,"cleanup"],[122,20,63,20,"cleanup"],[122,21,63,20],[122,23,63,23],[123,6,64,8,"disconnect"],[123,16,64,18],[123,17,64,19],[123,18,64,20],[124,4,65,4],[125,4,66,4],[125,13,66,13,"disconnect"],[125,23,66,23,"disconnect"],[125,24,66,23],[125,26,66,26],[126,6,67,8],[126,10,67,12,"socket"],[126,16,67,18],[126,18,67,20],[127,8,68,12,"socket"],[127,14,68,18],[127,15,68,19,"disconnect"],[127,25,68,29],[127,26,68,30],[127,27,68,31],[128,6,69,8],[129,4,70,4],[130,4,71,4],[130,13,71,13,"updateConfig"],[130,25,71,25,"updateConfig"],[130,26,71,26,"config"],[130,32,71,32],[130,34,71,34],[131,6,72,8,"cleanup"],[131,13,72,15],[131,14,72,16],[131,15,72,17],[132,6,73,8,"currentConfig"],[132,19,73,21],[132,22,73,24],[133,8,74,12],[133,11,74,15,"currentConfig"],[133,24,74,28],[134,8,75,12],[134,11,75,15,"config"],[135,6,76,8],[135,7,76,9],[136,6,77,8,"socket"],[136,12,77,14],[136,15,77,17,"initializeSocket"],[136,31,77,33],[136,32,77,34,"currentConfig"],[136,45,77,47],[136,47,77,49,"handlers"],[136,55,77,57],[136,56,77,58],[137,4,78,4],[138,4,79,4],[138,13,79,13,"joinRoom"],[138,21,79,21,"joinRoom"],[138,22,79,22,"room"],[138,26,79,26],[138,28,79,28],[139,6,80,8,"socket"],[139,12,80,14],[139,13,80,15,"emit"],[139,17,80,19],[139,18,80,20],[139,24,80,26],[139,26,80,28,"room"],[139,30,80,32],[139,31,80,33],[140,4,81,4],[141,4,82,4],[141,13,82,13,"leaveRoom"],[141,22,82,22,"leaveRoom"],[141,23,82,23,"room"],[141,27,82,27],[141,29,82,29],[142,6,83,8,"socket"],[142,12,83,14],[142,13,83,15,"emit"],[142,17,83,19],[142,18,83,20],[142,25,83,27],[142,27,83,29,"room"],[142,31,83,33],[142,32,83,34],[143,4,84,4],[144,4,84,5],[144,13,85,19,"updateModel"],[144,24,85,30,"updateModel"],[144,25,85,30,"_x6"],[144,28,85,30],[144,30,85,30,"_x7"],[144,33,85,30],[145,6,85,30],[145,13,85,30,"_updateModel"],[145,25,85,30],[145,26,85,30,"apply"],[145,31,85,30],[145,38,85,30,"arguments"],[145,47,85,30],[146,4,85,30],[147,4,85,30],[147,13,85,30,"_updateModel"],[147,26,85,30],[148,6,85,30,"_updateModel"],[148,18,85,30],[148,25,85,30,"_asyncToGenerator"],[148,42,85,30],[148,43,85,30,"default"],[148,50,85,30],[148,52,85,4],[148,63,85,31,"room"],[148,67,85,35],[148,69,85,37,"data"],[148,73,85,41],[148,75,85,43],[149,8,86,8],[149,12,86,12,"_a"],[149,14,86,14],[150,8,87,8],[150,12,87,14,"dataStr"],[150,19,87,21],[150,22,87,24,"JSON"],[150,26,87,28],[150,27,87,29,"stringify"],[150,36,87,38],[150,37,87,39,"data"],[150,41,87,43],[150,42,87,44],[151,8,88,8],[151,15,88,15],[151,16,88,16,"_a"],[151,18,88,18],[151,21,88,21,"handlers"],[151,29,88,29],[151,30,88,30,"update_model"],[151,42,88,42],[151,48,88,48],[151,52,88,52],[151,56,88,56,"_a"],[151,58,88,58],[151,63,88,63],[151,68,88,68],[151,69,88,69],[151,72,88,72],[151,77,88,77],[151,78,88,78],[151,81,88,81,"_a"],[151,83,88,83],[151,84,88,84,"call"],[151,88,88,88],[151,89,88,89,"handlers"],[151,97,88,97],[151,99,88,99],[152,10,88,101,"room"],[152,14,88,105],[153,10,88,107,"data"],[153,14,88,111],[153,16,88,113,"dataStr"],[154,8,88,121],[154,9,88,122],[154,10,88,123],[155,6,89,4],[155,7,89,5],[156,6,89,5],[156,13,89,5,"_updateModel"],[156,25,89,5],[156,26,89,5,"apply"],[156,31,89,5],[156,38,89,5,"arguments"],[156,47,89,5],[157,4,89,5],[158,4,90,4],[158,13,90,13,"getListeners"],[158,25,90,25,"getListeners"],[158,26,90,26,"room"],[158,30,90,30],[158,32,90,32],[159,6,91,8],[159,13,91,15,"roomsToListeners"],[159,29,91,31],[159,30,91,32,"room"],[159,34,91,36],[159,35,91,37],[160,4,92,4],[161,4,93,4],[161,8,93,10,"subscribeToRoom"],[161,23,93,25],[161,26,93,28,"subscribeToRoom"],[161,27,93,29,"room"],[161,31,93,33],[161,33,93,35,"handlers"],[161,41,93,43],[161,46,93,48],[162,6,94,8],[162,10,94,12],[162,11,94,13,"roomsToListeners"],[162,27,94,29],[162,28,94,30,"room"],[162,32,94,34],[162,33,94,35],[162,35,94,37],[163,8,95,12,"joinRoom"],[163,16,95,20],[163,17,95,21,"room"],[163,21,95,25],[163,22,95,26],[164,8,96,12,"roomsToListeners"],[164,24,96,28],[164,25,96,29,"room"],[164,29,96,33],[164,30,96,34],[164,33,96,37],[164,35,96,39],[165,6,97,8],[166,6,98,8,"roomsToListeners"],[166,22,98,24],[166,23,98,25,"room"],[166,27,98,29],[166,28,98,30],[166,29,98,31,"push"],[166,33,98,35],[166,34,98,36,"handlers"],[166,42,98,44],[166,43,98,45],[167,6,99,8],[167,13,99,15],[167,19,99,21],[168,8,100,12],[168,12,100,16,"_a"],[168,14,100,18],[168,16,100,20,"_b"],[168,18,100,22],[169,8,101,12,"roomsToListeners"],[169,24,101,28],[169,25,101,29,"room"],[169,29,101,33],[169,30,101,34],[169,33,102,16],[169,34,102,17,"_b"],[169,36,102,19],[169,39,102,22],[169,40,102,23,"_a"],[169,42,102,25],[169,45,102,28,"roomsToListeners"],[169,61,102,44],[169,62,102,45,"room"],[169,66,102,49],[169,67,102,50],[169,73,102,56],[169,77,102,60],[169,81,102,64,"_a"],[169,83,102,66],[169,88,102,71],[169,93,102,76],[169,94,102,77],[169,97,102,80],[169,102,102,85],[169,103,102,86],[169,106,102,89,"_a"],[169,108,102,91],[169,109,102,92,"filter"],[169,115,102,98],[169,116,102,100,"listener"],[169,124,102,108],[169,128,102,113,"listener"],[169,136,102,121],[169,141,102,126,"handlers"],[169,149,102,134],[169,150,102,135],[169,156,102,141],[169,160,102,145],[169,164,102,149,"_b"],[169,166,102,151],[169,171,102,156],[169,176,102,161],[169,177,102,162],[169,180,102,165,"_b"],[169,182,102,167],[169,185,102,170],[169,187,102,172],[170,8,103,12],[170,12,103,16,"roomsToListeners"],[170,28,103,32],[170,29,103,33,"room"],[170,33,103,37],[170,34,103,38],[170,35,103,39,"length"],[170,41,103,45],[170,46,103,50],[170,47,103,51],[170,49,103,53],[171,10,104,16,"leaveRoom"],[171,19,104,25],[171,20,104,26,"room"],[171,24,104,30],[171,25,104,31],[172,8,105,12],[173,6,106,8],[173,7,106,9],[174,4,107,4],[174,5,107,5],[175,4,108,4],[175,11,108,11],[176,6,109,8,"socket"],[176,12,109,14],[177,6,110,8,"subscribeToRoom"],[177,21,110,23],[178,6,111,8,"updateConfig"],[178,18,111,20],[179,6,112,8,"updateModel"],[179,17,112,19],[180,6,113,8,"disconnect"],[181,4,114,4],[181,5,114,5],[182,2,115,0],[183,0,115,1],[183,3]],"functionMap":{"names":["<global>","initializeSocket","socket.on$argument_1","RoomsSocket","handlers.connect","Object.keys.forEach$argument_0","listeners.forEach$argument_0","promise","handlers.update_model","listeners.map$argument_0","handlers.error","Object.values.flat.map$argument_0","cleanup","disconnect","updateConfig","joinRoom","leaveRoom","updateModel","getListeners","subscribeToRoom","<anonymous>","_a.filter$argument_0"],"mappings":"AAA;ACE;yBCU;KDI;8BCC;KDG;uBCC;KDG;+BCC;KDI;CDE;OGC;iBCI;kDCE;wFCG;oCCC,uED;iBDE;aDC;SDE;sBKC;2CCE,0HD;SLE;eOC;qBCI,qHD;SPE;ISG;KTE;IUC;KVI;IWC;KXO;IYC;KZE;IaC;KbE;IcC;KdI;IeC;KfE;4BgBC;eCM;mGCG,mCD;SDI;KhBC;CHQ"},"hasCjsExports":false},"type":"js/module"}]}