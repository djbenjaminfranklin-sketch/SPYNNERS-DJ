{"dependencies":[{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"./auth-utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":39},"end":{"line":2,"column":49,"index":88}}],"key":"7tDlZQ/XN5DIg73pnBu6jGNxq9c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),e.RoomsSocket=function({config:o}){let n={...o};const c={},l={connect:async()=>{const o=[];Object.keys(c).forEach(n=>{v(n);const t=f(n);null==t||t.forEach(({connect:n})=>{o.push((async()=>null==n?void 0:n())())})}),await Promise.all(o)},update_model:async o=>{const n=f(o.room).map(n=>{var t;return null===(t=n.update_model)||void 0===t?void 0:t.call(n,o)});await Promise.all(n)},error:async o=>{console.error(\"error\",o);const n=Object.values(c).flat().map(n=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,o)});await Promise.all(n)}};let u=t(o,l);function s(){u&&u.disconnect()}function v(o){u.emit(\"join\",o)}function p(o){u.emit(\"leave\",o)}function f(o){return c[o]}return{socket:u,subscribeToRoom:(o,n)=>(c[o]||(v(o),c[o]=[]),c[o].push(n),()=>{var t,l;c[o]=null!==(l=null===(t=c[o])||void 0===t?void 0:t.filter(o=>o!==n))&&void 0!==l?l:[],0===c[o].length&&p(o)}),updateConfig:function(o){s(),n={...n,...o},u=t(n,l)},updateModel:async function(o,n){var t;const c=JSON.stringify(n);return null===(t=l.update_model)||void 0===t?void 0:t.call(l,{room:o,data:c})},disconnect:s}};var o=r(d[0]),n=r(d[1]);function t(t,c){var l;const u=(0,o.io)(t.serverUrl,{path:t.mountPath,transports:t.transports,query:{app_id:t.appId,token:null!==(l=t.token)&&void 0!==l?l:(0,n.getAccessToken)()}});return u.on(\"connect\",async()=>{var o;return console.log(\"connect\",u.id),null===(o=c.connect)||void 0===o?void 0:o.call(c)}),u.on(\"update_model\",async o=>{var n;return null===(n=c.update_model)||void 0===n?void 0:n.call(c,o)}),u.on(\"error\",async o=>{var n;return null===(n=c.error)||void 0===n?void 0:n.call(c,o)}),u.on(\"connect_error\",async o=>{var n;return console.error(\"connect_error\",o),null===(n=c.error)||void 0===n?void 0:n.call(c,o)}),u}});","lineCount":1,"map":[[1,90,33,0,"e"],[1,92,33,0,"RoomsSocket"],[1,104,33,7],[1,114,33,28,"config"],[1,121,33,30,"config"],[1,125,34,4],[1,129,34,8,"currentConfig"],[1,131,34,24],[1,135,34,29,"config"],[1,138,35,4],[1,144,35,10,"roomsToListeners"],[1,146,35,29],[1,147,35,30],[1,149,36,10,"handlers"],[1,151,36,21],[1,152,37,8,"connect"],[1,160,37,17,"async"],[1,170,38,12],[1,176,38,18,"promises"],[1,178,38,29],[1,181,39,12,"Object"],[1,188,39,19,"keys"],[1,193,39,24,"roomsToListeners"],[1,196,39,42,"forEach"],[1,204,39,51,"room"],[1,208,40,16,"joinRoom"],[1,210,40,25,"room"],[1,213,41,16],[1,219,41,22,"listeners"],[1,221,41,34,"getListeners"],[1,223,41,47,"room"],[1,226,42,16,"listeners"],[1,235,42,70,"listeners"],[1,237,42,80,"forEach"],[1,245,42,88],[1,247,42,91,"connect"],[1,261,44,20,"promises"],[1,263,44,29,"push"],[1,268,43,36,"async"],[1,278,43,48,"connect"],[1,291,43,86,"undefined"],[1,293,43,98,"connect"],[1,297,44,34,"promise"],[1,311,47,18,"Promise"],[1,319,47,26,"all"],[1,323,47,30,"promises"],[1,327,49,8,"update_model"],[1,340,49,22,"async"],[1,350,50,12],[1,356,51,18,"promises"],[1,358,50,30,"getListeners"],[1,360,50,43,"msg"],[1,362,50,47,"room"],[1,368,51,39,"map"],[1,372,51,44,"listener"],[1,376,51,59],[1,380,51,63,"_a"],[1,382,51,67],[1,389,51,107],[1,397,51,75,"_a"],[1,399,51,80,"listener"],[1,401,51,89,"update_model"],[1,421,51,117,"undefined"],[1,425,51,115,"_a"],[1,432,51,128,"undefined"],[1,434,51,140,"_a"],[1,436,51,143,"call"],[1,441,51,148,"listener"],[1,443,51,158,"msg"],[1,454,52,18,"Promise"],[1,462,52,26,"all"],[1,466,52,30,"promises"],[1,470,54,8,"error"],[1,476,54,15,"async"],[1,486,55,12,"console"],[1,494,55,20,"error"],[1,500,55,26],[1,508,55,35,"error"],[1,511,56,12],[1,517,56,18,"promises"],[1,519,56,29,"Object"],[1,526,56,36,"values"],[1,533,56,43,"roomsToListeners"],[1,536,57,17,"flat"],[1,543,58,17,"map"],[1,547,58,22,"listener"],[1,551,58,37],[1,555,58,41,"_a"],[1,557,58,45],[1,564,58,78],[1,572,58,53,"_a"],[1,574,58,58,"listener"],[1,576,58,67,"error"],[1,589,58,88,"undefined"],[1,593,58,86,"_a"],[1,600,58,99,"undefined"],[1,602,58,111,"_a"],[1,604,58,114,"call"],[1,609,58,119,"listener"],[1,611,58,129,"error"],[1,622,59,18,"Promise"],[1,630,59,26,"all"],[1,634,59,30,"promises"],[1,639,62,4],[1,643,62,8,"socket"],[1,645,62,17,"initializeSocket"],[1,647,62,34,"config"],[1,649,62,42,"handlers"],[1,652,66,4],[1,661,66,13,"disconnect"],[1,665,67,12,"socket"],[1,668,68,12,"socket"],[1,670,68,19,"disconnect"],[1,682,70,4],[1,683,79,4],[1,692,79,13,"joinRoom"],[1,694,79,22,"room"],[1,697,80,8,"socket"],[1,699,80,15,"emit"],[1,704,80,20],[1,711,80,28,"room"],[1,713,81,4],[1,714,82,4],[1,723,82,13,"leaveRoom"],[1,725,82,23,"room"],[1,728,83,8,"socket"],[1,730,83,15,"emit"],[1,735,83,20],[1,743,83,29,"room"],[1,745,84,4],[1,746,90,4],[1,755,90,13,"getListeners"],[1,757,90,26,"room"],[1,760,91,8],[1,767,91,15,"roomsToListeners"],[1,769,91,32,"room"],[1,771,92,4],[1,772,108,4],[1,778,108,11],[1,779,109,8,"socket"],[1,788,110,8,"subscribeToRoom"],[1,804,93,28,"subscribeToRoom"],[1,805,93,29,"room"],[1,807,93,35,"handlers"],[1,812,94,13,"roomsToListeners"],[1,814,94,30,"room"],[1,819,95,12,"joinRoom"],[1,821,95,21,"room"],[1,824,96,12,"roomsToListeners"],[1,826,96,29,"room"],[1,829,96,37],[1,833,98,8,"roomsToListeners"],[1,835,98,25,"room"],[1,838,98,31,"push"],[1,843,98,36,"handlers"],[1,846,99,15],[1,851,100,12],[1,855,100,16,"_a"],[1,857,100,20,"_b"],[1,859,101,12,"roomsToListeners"],[1,861,101,29,"room"],[1,864,102,141],[1,872,102,17,"_b"],[1,874,102,56],[1,882,102,23,"_a"],[1,884,102,28,"roomsToListeners"],[1,886,102,45,"room"],[1,896,102,66,"undefined"],[1,900,102,64,"_a"],[1,907,102,77,"undefined"],[1,909,102,89,"_a"],[1,911,102,92,"filter"],[1,918,102,100,"listener"],[1,921,102,113,"listener"],[1,925,102,126,"handlers"],[1,935,102,151,"undefined"],[1,939,102,149,"_b"],[1,941,102,165,"_b"],[1,943,102,170],[1,946,103,50],[1,950,103,16,"roomsToListeners"],[1,952,103,33,"room"],[1,955,103,39,"length"],[1,963,104,16,"leaveRoom"],[1,965,104,26,"room"],[1,970,111,8,"updateConfig"],[1,983,71,4],[1,992,71,26,"config"],[1,995,64,8,"disconnect"],[1,999,73,8,"currentConfig"],[1,1001,73,24],[1,1005,74,15,"currentConfig"],[1,1010,75,15,"config"],[1,1013,77,8,"socket"],[1,1015,77,17,"initializeSocket"],[1,1017,77,34,"currentConfig"],[1,1019,77,49,"handlers"],[1,1021,78,4],[1,1023,112,8,"updateModel"],[1,1035,85,4,"async"],[1,1050,85,31,"room"],[1,1052,85,37,"data"],[1,1055,86,8],[1,1059,86,12,"_a"],[1,1061,87,8],[1,1067,87,14,"dataStr"],[1,1069,87,24,"JSON"],[1,1074,87,29,"stringify"],[1,1084,87,39,"data"],[1,1087,88,8],[1,1094,88,48],[1,1102,88,16,"_a"],[1,1104,88,21,"handlers"],[1,1106,88,30,"update_model"],[1,1126,88,58,"undefined"],[1,1130,88,56,"_a"],[1,1137,88,69,"undefined"],[1,1139,88,81,"_a"],[1,1141,88,84,"call"],[1,1146,88,89,"handlers"],[1,1148,88,99],[1,1149,88,101,"room"],[1,1156,88,107,"data"],[1,1161,88,113,"dataStr"],[1,1164,89,4],[1,1166,113,8,"disconnect"],[1,1179,115,0],[1,1181,1,0],[1,1185,1,0,"_socketIoClient"],[1,1187,1,0,"r"],[1,1189,1,0,"d"],[1,1191,1,0],[1,1195,2,0,"_authUtilsJs"],[1,1197,2,0,"r"],[1,1199,2,0,"d"],[1,1201,2,0],[1,1205,3,0],[1,1214,3,9,"initializeSocket"],[1,1216,3,26,"config"],[1,1218,3,34,"handlers"],[1,1221,4,4],[1,1225,4,8,"_a"],[1,1227,5,4],[1,1233,5,10,"socket"],[1,1236,5,19],[1,1238,5,19,"io"],[1,1240,5,21,"io"],[1,1244,5,22,"config"],[1,1246,5,29,"serverUrl"],[1,1256,5,40],[1,1257,6,8,"path"],[1,1262,6,14,"config"],[1,1264,6,21,"mountPath"],[1,1274,7,8,"transports"],[1,1285,7,20,"config"],[1,1287,7,27,"transports"],[1,1298,8,8,"query"],[1,1304,8,15],[1,1305,9,12,"app_id"],[1,1312,9,20,"config"],[1,1314,9,27,"appId"],[1,1320,10,12,"token"],[1,1326,10,43],[1,1334,10,20,"_a"],[1,1336,10,25,"config"],[1,1338,10,32,"token"],[1,1351,10,53,"undefined"],[1,1355,10,51,"_a"],[1,1357,10,67,"_a"],[1,1360,10,72],[1,1362,10,72,"getAccessToken"],[1,1364,10,86,"getAccessToken"],[1,1385,31,4],[1,1392,13,4,"socket"],[1,1394,13,11,"on"],[1,1397,13,14],[1,1407,13,25,"async"],[1,1417,14,8],[1,1421,14,12,"_a"],[1,1423,16,8],[1,1430,15,8,"console"],[1,1438,15,16,"log"],[1,1442,15,20],[1,1452,15,31,"socket"],[1,1454,15,38,"id"],[1,1458,16,43],[1,1466,16,16,"_a"],[1,1468,16,21,"handlers"],[1,1470,16,30,"connect"],[1,1485,16,53,"undefined"],[1,1489,16,51,"_a"],[1,1496,16,64,"undefined"],[1,1498,16,76,"_a"],[1,1500,16,79,"call"],[1,1505,16,84,"handlers"],[1,1510,18,4,"socket"],[1,1512,18,11,"on"],[1,1515,18,14],[1,1530,18,30,"async"],[1,1540,19,8],[1,1544,19,12,"_a"],[1,1546,20,8],[1,1553,20,48],[1,1561,20,16,"_a"],[1,1563,20,21,"handlers"],[1,1565,20,30,"update_model"],[1,1585,20,58,"undefined"],[1,1589,20,56,"_a"],[1,1596,20,69,"undefined"],[1,1598,20,81,"_a"],[1,1600,20,84,"call"],[1,1605,20,89,"handlers"],[1,1607,20,99,"msg"],[1,1612,22,4,"socket"],[1,1614,22,11,"on"],[1,1617,22,14],[1,1625,22,23,"async"],[1,1635,23,8],[1,1639,23,12,"_a"],[1,1641,24,8],[1,1648,24,41],[1,1656,24,16,"_a"],[1,1658,24,21,"handlers"],[1,1660,24,30,"error"],[1,1673,24,51,"undefined"],[1,1677,24,49,"_a"],[1,1684,24,62,"undefined"],[1,1686,24,74,"_a"],[1,1688,24,77,"call"],[1,1693,24,82,"handlers"],[1,1695,24,92,"error"],[1,1700,26,4,"socket"],[1,1702,26,11,"on"],[1,1705,26,14],[1,1721,26,31,"async"],[1,1731,27,8],[1,1735,27,12,"_a"],[1,1737,29,8],[1,1744,28,8,"console"],[1,1752,28,16,"error"],[1,1758,28,22],[1,1774,28,39,"error"],[1,1777,29,41],[1,1785,29,16,"_a"],[1,1787,29,21,"handlers"],[1,1789,29,30,"error"],[1,1802,29,51,"undefined"],[1,1806,29,49,"_a"],[1,1813,29,62,"undefined"],[1,1815,29,74,"_a"],[1,1817,29,77,"call"],[1,1822,29,82,"handlers"],[1,1824,29,92,"error"],[1,1829,31,11,"socket"],[1,1830,32,0],[1,1831,115,1],[1,1834]],"functionMap":{"names":["<global>","initializeSocket","socket.on$argument_1","RoomsSocket","handlers.connect","Object.keys.forEach$argument_0","listeners.forEach$argument_0","promise","handlers.update_model","listeners.map$argument_0","handlers.error","Object.values.flat.map$argument_0","cleanup","disconnect","updateConfig","joinRoom","leaveRoom","updateModel","getListeners","subscribeToRoom","<anonymous>","_a.filter$argument_0"],"mappings":"AAA;ACE;yBCU;KDI;8BCC;KDG;uBCC;KDG;+BCC;KDI;CDE;OGC;iBCI;kDCE;wFCG;oCCC,uED;iBDE;aDC;SDE;sBKC;2CCE,0HD;SLE;eOC;qBCI,qHD;SPE;ISG;KTE;IUC;KVI;IWC;KXO;IYC;KZE;IaC;KbE;IcC;KdI;IeC;KfE;4BgBC;eCM;mGCG,mCD;SDI;KhBC;CHQ"},"hasCjsExports":false},"type":"js/module"}]}