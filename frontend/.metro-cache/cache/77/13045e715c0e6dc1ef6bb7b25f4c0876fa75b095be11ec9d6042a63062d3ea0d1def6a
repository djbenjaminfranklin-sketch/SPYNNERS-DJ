{"dependencies":[{"name":"./rng.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":27,"index":27}}],"key":"GJimBYuDDd6EeueloFHQJIiIo5Y=","exportNames":["*"],"imports":1}},{"name":"./stringify.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":28},"end":{"line":2,"column":49,"index":77}}],"key":"X1ch7bs3UUIXmGFY4ypSSY/7qNo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.updateV7State = updateV7State;\n  var _rngJs = require(_dependencyMap[0], \"./rng.js\");\n  var rng = _interopDefault(_rngJs);\n  var _stringifyJs = require(_dependencyMap[1], \"./stringify.js\");\n  var _state = {};\n  function v7(options, buf, offset) {\n    var bytes;\n    if (options) {\n      bytes = v7Bytes(options.random ?? options.rng?.() ?? (0, rng.default)(), options.msecs, options.seq, buf, offset);\n    } else {\n      var now = Date.now();\n      var rnds = (0, rng.default)();\n      updateV7State(_state, now, rnds);\n      bytes = v7Bytes(rnds, _state.msecs, _state.seq, buf, offset);\n    }\n    return buf ?? (0, _stringifyJs.unsafeStringify)(bytes);\n  }\n  function updateV7State(state, now, rnds) {\n    state.msecs ??= -Infinity;\n    state.seq ??= 0;\n    if (now > state.msecs) {\n      state.seq = rnds[6] << 23 | rnds[7] << 16 | rnds[8] << 8 | rnds[9];\n      state.msecs = now;\n    } else {\n      state.seq = state.seq + 1 | 0;\n      if (state.seq === 0) {\n        state.msecs++;\n      }\n    }\n    return state;\n  }\n  function v7Bytes(rnds, msecs, seq, buf) {\n    var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    if (rnds.length < 16) {\n      throw new Error('Random bytes length must be >= 16');\n    }\n    if (!buf) {\n      buf = new Uint8Array(16);\n      offset = 0;\n    } else {\n      if (offset < 0 || offset + 16 > buf.length) {\n        throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n      }\n    }\n    msecs ??= Date.now();\n    seq ??= rnds[6] * 0x7f << 24 | rnds[7] << 16 | rnds[8] << 8 | rnds[9];\n    buf[offset++] = msecs / 0x10000000000 & 0xff;\n    buf[offset++] = msecs / 0x100000000 & 0xff;\n    buf[offset++] = msecs / 0x1000000 & 0xff;\n    buf[offset++] = msecs / 0x10000 & 0xff;\n    buf[offset++] = msecs / 0x100 & 0xff;\n    buf[offset++] = msecs & 0xff;\n    buf[offset++] = 0x70 | seq >>> 28 & 0x0f;\n    buf[offset++] = seq >>> 20 & 0xff;\n    buf[offset++] = 0x80 | seq >>> 14 & 0x3f;\n    buf[offset++] = seq >>> 6 & 0xff;\n    buf[offset++] = seq << 2 & 0xff | rnds[10] & 0x03;\n    buf[offset++] = rnds[11];\n    buf[offset++] = rnds[12];\n    buf[offset++] = rnds[13];\n    buf[offset++] = rnds[14];\n    buf[offset++] = rnds[15];\n    return buf;\n  }\n  var _default = v7;\n});","lineCount":83,"map":[[12,2,65,0,"Object"],[12,8,65,0],[12,9,65,0,"defineProperty"],[12,23,65,0],[12,24,65,0,"exports"],[12,31,65,0],[13,4,65,0,"enumerable"],[13,14,65,0],[14,4,65,0,"get"],[14,7,65,0],[14,18,65,0,"get"],[14,19,65,0],[15,6,65,0],[15,13,65,0,"_default"],[15,21,65,0],[16,4,65,0],[17,2,65,0],[18,2,17,0,"exports"],[18,9,17,0],[18,10,17,0,"updateV7State"],[18,23,17,0],[18,26,17,0,"updateV7State"],[18,39,17,0],[19,2,1,0],[19,6,1,0,"_rngJs"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,1,0],[20,6,1,0,"rng"],[20,9,1,0],[20,12,1,0,"_interopDefault"],[20,27,1,0],[20,28,1,0,"_rngJs"],[20,34,1,0],[21,2,2,0],[21,6,2,0,"_stringifyJs"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,6,"_state"],[22,12,3,12],[22,15,3,15],[22,16,3,16],[22,17,3,17],[23,2,4,0],[23,11,4,9,"v7"],[23,13,4,11,"v7"],[23,14,4,12,"options"],[23,21,4,19],[23,23,4,21,"buf"],[23,26,4,24],[23,28,4,26,"offset"],[23,34,4,32],[23,36,4,34],[24,4,5,4],[24,8,5,8,"bytes"],[24,13,5,13],[25,4,6,4],[25,8,6,8,"options"],[25,15,6,15],[25,17,6,17],[26,6,7,8,"bytes"],[26,11,7,13],[26,14,7,16,"v7Bytes"],[26,21,7,23],[26,22,7,24,"options"],[26,29,7,31],[26,30,7,32,"random"],[26,36,7,38],[26,40,7,42,"options"],[26,47,7,49],[26,48,7,50,"rng"],[26,51,7,53],[26,54,7,56],[26,55,7,57],[26,59,7,61],[26,63,7,61,"rng"],[26,66,7,64],[26,67,7,64,"default"],[26,74,7,64],[26,76,7,65],[26,77,7,66],[26,79,7,68,"options"],[26,86,7,75],[26,87,7,76,"msecs"],[26,92,7,81],[26,94,7,83,"options"],[26,101,7,90],[26,102,7,91,"seq"],[26,105,7,94],[26,107,7,96,"buf"],[26,110,7,99],[26,112,7,101,"offset"],[26,118,7,107],[26,119,7,108],[27,4,8,4],[27,5,8,5],[27,11,9,9],[28,6,10,8],[28,10,10,14,"now"],[28,13,10,17],[28,16,10,20,"Date"],[28,20,10,24],[28,21,10,25,"now"],[28,24,10,28],[28,25,10,29],[28,26,10,30],[29,6,11,8],[29,10,11,14,"rnds"],[29,14,11,18],[29,17,11,21],[29,21,11,21,"rng"],[29,24,11,24],[29,25,11,24,"default"],[29,32,11,24],[29,34,11,25],[29,35,11,26],[30,6,12,8,"updateV7State"],[30,19,12,21],[30,20,12,22,"_state"],[30,26,12,28],[30,28,12,30,"now"],[30,31,12,33],[30,33,12,35,"rnds"],[30,37,12,39],[30,38,12,40],[31,6,13,8,"bytes"],[31,11,13,13],[31,14,13,16,"v7Bytes"],[31,21,13,23],[31,22,13,24,"rnds"],[31,26,13,28],[31,28,13,30,"_state"],[31,34,13,36],[31,35,13,37,"msecs"],[31,40,13,42],[31,42,13,44,"_state"],[31,48,13,50],[31,49,13,51,"seq"],[31,52,13,54],[31,54,13,56,"buf"],[31,57,13,59],[31,59,13,61,"offset"],[31,65,13,67],[31,66,13,68],[32,4,14,4],[33,4,15,4],[33,11,15,11,"buf"],[33,14,15,14],[33,18,15,18],[33,22,15,18,"unsafeStringify"],[33,34,15,33],[33,35,15,33,"unsafeStringify"],[33,50,15,33],[33,52,15,34,"bytes"],[33,57,15,39],[33,58,15,40],[34,2,16,0],[35,2,17,7],[35,11,17,16,"updateV7State"],[35,24,17,29,"updateV7State"],[35,25,17,30,"state"],[35,30,17,35],[35,32,17,37,"now"],[35,35,17,40],[35,37,17,42,"rnds"],[35,41,17,46],[35,43,17,48],[36,4,18,4,"state"],[36,9,18,9],[36,10,18,10,"msecs"],[36,15,18,15],[36,20,18,20],[36,21,18,21,"Infinity"],[36,29,18,29],[37,4,19,4,"state"],[37,9,19,9],[37,10,19,10,"seq"],[37,13,19,13],[37,18,19,18],[37,19,19,19],[38,4,20,4],[38,8,20,8,"now"],[38,11,20,11],[38,14,20,14,"state"],[38,19,20,19],[38,20,20,20,"msecs"],[38,25,20,25],[38,27,20,27],[39,6,21,8,"state"],[39,11,21,13],[39,12,21,14,"seq"],[39,15,21,17],[39,18,21,21,"rnds"],[39,22,21,25],[39,23,21,26],[39,24,21,27],[39,25,21,28],[39,29,21,32],[39,31,21,34],[39,34,21,39,"rnds"],[39,38,21,43],[39,39,21,44],[39,40,21,45],[39,41,21,46],[39,45,21,50],[39,47,21,53],[39,50,21,57,"rnds"],[39,54,21,61],[39,55,21,62],[39,56,21,63],[39,57,21,64],[39,61,21,68],[39,62,21,70],[39,65,21,73,"rnds"],[39,69,21,77],[39,70,21,78],[39,71,21,79],[39,72,21,80],[40,6,22,8,"state"],[40,11,22,13],[40,12,22,14,"msecs"],[40,17,22,19],[40,20,22,22,"now"],[40,23,22,25],[41,4,23,4],[41,5,23,5],[41,11,24,9],[42,6,25,8,"state"],[42,11,25,13],[42,12,25,14,"seq"],[42,15,25,17],[42,18,25,21,"state"],[42,23,25,26],[42,24,25,27,"seq"],[42,27,25,30],[42,30,25,33],[42,31,25,34],[42,34,25,38],[42,35,25,39],[43,6,26,8],[43,10,26,12,"state"],[43,15,26,17],[43,16,26,18,"seq"],[43,19,26,21],[43,24,26,26],[43,25,26,27],[43,27,26,29],[44,8,27,12,"state"],[44,13,27,17],[44,14,27,18,"msecs"],[44,19,27,23],[44,21,27,25],[45,6,28,8],[46,4,29,4],[47,4,30,4],[47,11,30,11,"state"],[47,16,30,16],[48,2,31,0],[49,2,32,0],[49,11,32,9,"v7Bytes"],[49,18,32,16,"v7Bytes"],[49,19,32,17,"rnds"],[49,23,32,21],[49,25,32,23,"msecs"],[49,30,32,28],[49,32,32,30,"seq"],[49,35,32,33],[49,37,32,35,"buf"],[49,40,32,38],[49,42,32,52],[50,4,32,52],[50,8,32,40,"offset"],[50,14,32,46],[50,17,32,46,"arguments"],[50,26,32,46],[50,27,32,46,"length"],[50,33,32,46],[50,41,32,46,"arguments"],[50,50,32,46],[50,58,32,46,"undefined"],[50,67,32,46],[50,70,32,46,"arguments"],[50,79,32,46],[50,85,32,49],[50,86,32,50],[51,4,33,4],[51,8,33,8,"rnds"],[51,12,33,12],[51,13,33,13,"length"],[51,19,33,19],[51,22,33,22],[51,24,33,24],[51,26,33,26],[52,6,34,8],[52,12,34,14],[52,16,34,18,"Error"],[52,21,34,23],[52,22,34,24],[52,57,34,59],[52,58,34,60],[53,4,35,4],[54,4,36,4],[54,8,36,8],[54,9,36,9,"buf"],[54,12,36,12],[54,14,36,14],[55,6,37,8,"buf"],[55,9,37,11],[55,12,37,14],[55,16,37,18,"Uint8Array"],[55,26,37,28],[55,27,37,29],[55,29,37,31],[55,30,37,32],[56,6,38,8,"offset"],[56,12,38,14],[56,15,38,17],[56,16,38,18],[57,4,39,4],[57,5,39,5],[57,11,40,9],[58,6,41,8],[58,10,41,12,"offset"],[58,16,41,18],[58,19,41,21],[58,20,41,22],[58,24,41,26,"offset"],[58,30,41,32],[58,33,41,35],[58,35,41,37],[58,38,41,40,"buf"],[58,41,41,43],[58,42,41,44,"length"],[58,48,41,50],[58,50,41,52],[59,8,42,12],[59,14,42,18],[59,18,42,22,"RangeError"],[59,28,42,32],[59,29,42,33],[59,48,42,52,"offset"],[59,54,42,58],[59,58,42,62,"offset"],[59,64,42,68],[59,67,42,71],[59,69,42,73],[59,95,42,99],[59,96,42,100],[60,6,43,8],[61,4,44,4],[62,4,45,4,"msecs"],[62,9,45,9],[62,14,45,14,"Date"],[62,18,45,18],[62,19,45,19,"now"],[62,22,45,22],[62,23,45,23],[62,24,45,24],[63,4,46,4,"seq"],[63,7,46,7],[63,12,46,14,"rnds"],[63,16,46,18],[63,17,46,19],[63,18,46,20],[63,19,46,21],[63,22,46,24],[63,26,46,28],[63,30,46,33],[63,32,46,35],[63,35,46,40,"rnds"],[63,39,46,44],[63,40,46,45],[63,41,46,46],[63,42,46,47],[63,46,46,51],[63,48,46,54],[63,51,46,58,"rnds"],[63,55,46,62],[63,56,46,63],[63,57,46,64],[63,58,46,65],[63,62,46,69],[63,63,46,71],[63,66,46,74,"rnds"],[63,70,46,78],[63,71,46,79],[63,72,46,80],[63,73,46,81],[64,4,47,4,"buf"],[64,7,47,7],[64,8,47,8,"offset"],[64,14,47,14],[64,16,47,16],[64,17,47,17],[64,20,47,21,"msecs"],[64,25,47,26],[64,28,47,29],[64,41,47,42],[64,44,47,46],[64,48,47,50],[65,4,48,4,"buf"],[65,7,48,7],[65,8,48,8,"offset"],[65,14,48,14],[65,16,48,16],[65,17,48,17],[65,20,48,21,"msecs"],[65,25,48,26],[65,28,48,29],[65,39,48,40],[65,42,48,44],[65,46,48,48],[66,4,49,4,"buf"],[66,7,49,7],[66,8,49,8,"offset"],[66,14,49,14],[66,16,49,16],[66,17,49,17],[66,20,49,21,"msecs"],[66,25,49,26],[66,28,49,29],[66,37,49,38],[66,40,49,42],[66,44,49,46],[67,4,50,4,"buf"],[67,7,50,7],[67,8,50,8,"offset"],[67,14,50,14],[67,16,50,16],[67,17,50,17],[67,20,50,21,"msecs"],[67,25,50,26],[67,28,50,29],[67,35,50,36],[67,38,50,40],[67,42,50,44],[68,4,51,4,"buf"],[68,7,51,7],[68,8,51,8,"offset"],[68,14,51,14],[68,16,51,16],[68,17,51,17],[68,20,51,21,"msecs"],[68,25,51,26],[68,28,51,29],[68,33,51,34],[68,36,51,38],[68,40,51,42],[69,4,52,4,"buf"],[69,7,52,7],[69,8,52,8,"offset"],[69,14,52,14],[69,16,52,16],[69,17,52,17],[69,20,52,20,"msecs"],[69,25,52,25],[69,28,52,28],[69,32,52,32],[70,4,53,4,"buf"],[70,7,53,7],[70,8,53,8,"offset"],[70,14,53,14],[70,16,53,16],[70,17,53,17],[70,20,53,20],[70,24,53,24],[70,27,53,29,"seq"],[70,30,53,32],[70,35,53,37],[70,37,53,39],[70,40,53,43],[70,44,53,48],[71,4,54,4,"buf"],[71,7,54,7],[71,8,54,8,"offset"],[71,14,54,14],[71,16,54,16],[71,17,54,17],[71,20,54,21,"seq"],[71,23,54,24],[71,28,54,29],[71,30,54,31],[71,33,54,35],[71,37,54,39],[72,4,55,4,"buf"],[72,7,55,7],[72,8,55,8,"offset"],[72,14,55,14],[72,16,55,16],[72,17,55,17],[72,20,55,20],[72,24,55,24],[72,27,55,29,"seq"],[72,30,55,32],[72,35,55,37],[72,37,55,39],[72,40,55,43],[72,44,55,48],[73,4,56,4,"buf"],[73,7,56,7],[73,8,56,8,"offset"],[73,14,56,14],[73,16,56,16],[73,17,56,17],[73,20,56,21,"seq"],[73,23,56,24],[73,28,56,29],[73,29,56,30],[73,32,56,34],[73,36,56,38],[74,4,57,4,"buf"],[74,7,57,7],[74,8,57,8,"offset"],[74,14,57,14],[74,16,57,16],[74,17,57,17],[74,20,57,22,"seq"],[74,23,57,25],[74,27,57,29],[74,28,57,30],[74,31,57,34],[74,35,57,38],[74,38,57,43,"rnds"],[74,42,57,47],[74,43,57,48],[74,45,57,50],[74,46,57,51],[74,49,57,54],[74,53,57,59],[75,4,58,4,"buf"],[75,7,58,7],[75,8,58,8,"offset"],[75,14,58,14],[75,16,58,16],[75,17,58,17],[75,20,58,20,"rnds"],[75,24,58,24],[75,25,58,25],[75,27,58,27],[75,28,58,28],[76,4,59,4,"buf"],[76,7,59,7],[76,8,59,8,"offset"],[76,14,59,14],[76,16,59,16],[76,17,59,17],[76,20,59,20,"rnds"],[76,24,59,24],[76,25,59,25],[76,27,59,27],[76,28,59,28],[77,4,60,4,"buf"],[77,7,60,7],[77,8,60,8,"offset"],[77,14,60,14],[77,16,60,16],[77,17,60,17],[77,20,60,20,"rnds"],[77,24,60,24],[77,25,60,25],[77,27,60,27],[77,28,60,28],[78,4,61,4,"buf"],[78,7,61,7],[78,8,61,8,"offset"],[78,14,61,14],[78,16,61,16],[78,17,61,17],[78,20,61,20,"rnds"],[78,24,61,24],[78,25,61,25],[78,27,61,27],[78,28,61,28],[79,4,62,4,"buf"],[79,7,62,7],[79,8,62,8,"offset"],[79,14,62,14],[79,16,62,16],[79,17,62,17],[79,20,62,20,"rnds"],[79,24,62,24],[79,25,62,25],[79,27,62,27],[79,28,62,28],[80,4,63,4],[80,11,63,11,"buf"],[80,14,63,14],[81,2,64,0],[82,2,65,0],[82,6,65,0,"_default"],[82,14,65,0],[82,17,65,15,"v7"],[82,19,65,17],[83,0,65,18],[83,3]],"functionMap":{"names":["<global>","v7","updateV7State","v7Bytes"],"mappings":"AAA;ACG;CDY;OEC;CFc;AGC;CHgC"},"hasCjsExports":false},"type":"js/module"}]}