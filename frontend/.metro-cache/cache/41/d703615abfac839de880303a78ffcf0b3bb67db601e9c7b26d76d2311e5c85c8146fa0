{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.recognizeAudioHybrid = recognizeAudioHybrid;\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * ACRCloud Recognition Service via Base44\n   * \n   * Uses the Base44 cloud function 'recognizeAudio' which handles\n   * ACRCloud integration server-side (same as the website).\n   */\n\n  // Base44 API configuration - same as website\n  const BASE44_API_URL = 'https://spynners.base44.app';\n  /**\n   * Call Base44 recognizeAudio function (same as website)\n   * This is the ONLY method - works on both web and mobile\n   */\n  async function recognizeAudioHybrid(audioBase64) {\n    console.log('[ACRCloud] Starting recognition via Base44...');\n    console.log('[ACRCloud] Audio data length:', audioBase64.length, 'Platform:', Platform.default.OS);\n    try {\n      // Call Base44 function directly - EXACTLY like the website does\n      // base44.functions.invoke('recognizeAudio', { audio_data, sample_rate, channels })\n      const response = await fetch(`${BASE44_API_URL}/api/functions/recognizeAudio`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          audio_data: audioBase64,\n          sample_rate: 48000,\n          channels: 2\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('[ACRCloud] Base44 error:', response.status, errorText);\n        throw new Error(`Base44 error: ${response.status} - ${errorText}`);\n      }\n      const result = await response.json();\n      console.log('[ACRCloud] Base44 response:', JSON.stringify(result).substring(0, 500));\n\n      // Parse response - Base44 function may return data in 'data' field or directly\n      const data = result.data || result;\n\n      // Check for error in response\n      if (data.error) {\n        console.log('[ACRCloud] API returned error:', data.error);\n        return {\n          success: false,\n          found: false,\n          mode: 'none',\n          error: data.error\n        };\n      }\n\n      // Check if track was found\n      if (data.success && data.found) {\n        console.log('[ACRCloud] ✅ Track found:', data.title, 'by', data.artist);\n        return {\n          success: true,\n          found: true,\n          title: data.title || data.external_metadata?.title || data.external_title,\n          artist: data.artist || data.external_metadata?.artist || data.external_artist,\n          album: data.album,\n          genre: data.genre,\n          cover_image: data.cover_image || data.artwork_url,\n          score: data.score,\n          mode: data.mode || 'offline',\n          acr_id: data.acr_id,\n          spynners_track_id: data.spynners_track_id,\n          producer_id: data.producer_id,\n          external_ids: data.external_ids\n        };\n      }\n\n      // Check if we found track info even without explicit 'found' flag\n      if (data.title || data.external_title) {\n        console.log('[ACRCloud] ✅ Track info found:', data.title || data.external_title);\n        return {\n          success: true,\n          found: true,\n          title: data.title || data.external_title,\n          artist: data.artist || data.external_artist || 'Unknown Artist',\n          album: data.album,\n          genre: data.genre,\n          cover_image: data.cover_image || data.artwork_url,\n          score: data.score,\n          mode: data.mode || 'offline',\n          acr_id: data.acr_id,\n          spynners_track_id: data.spynners_track_id,\n          producer_id: data.producer_id,\n          external_ids: data.external_ids\n        };\n      }\n\n      // No match found\n      console.log('[ACRCloud] No track found in response');\n      return {\n        success: true,\n        found: false,\n        mode: 'none',\n        error: data.message || 'No track found'\n      };\n    } catch (error) {\n      console.error('[ACRCloud] Recognition error:', error?.message || error);\n      return {\n        success: false,\n        found: false,\n        mode: 'none',\n        error: error?.message || 'Recognition failed'\n      };\n    }\n  }\n  var _default = {\n    recognizeAudioHybrid\n  };\n});","lineCount":134,"map":[[12,2,139,0,"Object"],[12,8,139,0],[12,9,139,0,"defineProperty"],[12,23,139,0],[12,24,139,0,"exports"],[12,31,139,0],[13,4,139,0,"enumerable"],[13,14,139,0],[14,4,139,0,"get"],[14,7,139,0],[14,18,139,0,"get"],[14,19,139,0],[15,6,139,0],[15,13,139,0,"_default"],[15,21,139,0],[16,4,139,0],[17,2,139,0],[18,2,37,0,"exports"],[18,9,37,0],[18,10,37,0,"recognizeAudioHybrid"],[18,30,37,0],[18,33,37,0,"recognizeAudioHybrid"],[18,53,37,0],[19,2,137,1],[19,6,137,1,"_reactNativeWebDistExportsPlatform"],[19,40,137,1],[19,43,137,1,"require"],[19,50,137,1],[19,51,137,1,"_dependencyMap"],[19,65,137,1],[20,2,137,1],[20,6,137,1,"Platform"],[20,14,137,1],[20,17,137,1,"_interopDefault"],[20,32,137,1],[20,33,137,1,"_reactNativeWebDistExportsPlatform"],[20,67,137,1],[21,2,1,0],[22,0,2,0],[23,0,3,0],[24,0,4,0],[25,0,5,0],[26,0,6,0],[28,2,10,0],[29,2,11,0],[29,8,11,6,"BASE44_API_URL"],[29,22,11,20],[29,25,11,23],[29,54,11,52],[30,2,33,0],[31,0,34,0],[32,0,35,0],[33,0,36,0],[34,2,37,7],[34,17,37,22,"recognizeAudioHybrid"],[34,37,37,42,"recognizeAudioHybrid"],[34,38,37,43,"audioBase64"],[34,49,37,62],[34,51,37,89],[35,4,38,2,"console"],[35,11,38,9],[35,12,38,10,"log"],[35,15,38,13],[35,16,38,14],[35,63,38,61],[35,64,38,62],[36,4,39,2,"console"],[36,11,39,9],[36,12,39,10,"log"],[36,15,39,13],[36,16,39,14],[36,47,39,45],[36,49,39,47,"audioBase64"],[36,60,39,58],[36,61,39,59,"length"],[36,67,39,65],[36,69,39,67],[36,80,39,78],[36,82,39,80,"Platform"],[36,90,39,88],[36,91,39,88,"default"],[36,98,39,88],[36,99,39,89,"OS"],[36,101,39,91],[36,102,39,92],[37,4,41,2],[37,8,41,6],[38,6,42,4],[39,6,43,4],[40,6,44,4],[40,12,44,10,"response"],[40,20,44,18],[40,23,44,21],[40,29,44,27,"fetch"],[40,34,44,32],[40,35,44,33],[40,38,44,36,"BASE44_API_URL"],[40,52,44,50],[40,83,44,81],[40,85,44,83],[41,8,45,6,"method"],[41,14,45,12],[41,16,45,14],[41,22,45,20],[42,8,46,6,"headers"],[42,15,46,13],[42,17,46,15],[43,10,47,8],[43,24,47,22],[43,26,47,24],[44,8,48,6],[44,9,48,7],[45,8,49,6,"body"],[45,12,49,10],[45,14,49,12,"JSON"],[45,18,49,16],[45,19,49,17,"stringify"],[45,28,49,26],[45,29,49,27],[46,10,50,8,"audio_data"],[46,20,50,18],[46,22,50,20,"audioBase64"],[46,33,50,31],[47,10,51,8,"sample_rate"],[47,21,51,19],[47,23,51,21],[47,28,51,26],[48,10,52,8,"channels"],[48,18,52,16],[48,20,52,18],[49,8,53,6],[49,9,53,7],[50,6,54,4],[50,7,54,5],[50,8,54,6],[51,6,56,4],[51,10,56,8],[51,11,56,9,"response"],[51,19,56,17],[51,20,56,18,"ok"],[51,22,56,20],[51,24,56,22],[52,8,57,6],[52,14,57,12,"errorText"],[52,23,57,21],[52,26,57,24],[52,32,57,30,"response"],[52,40,57,38],[52,41,57,39,"text"],[52,45,57,43],[52,46,57,44],[52,47,57,45],[53,8,58,6,"console"],[53,15,58,13],[53,16,58,14,"error"],[53,21,58,19],[53,22,58,20],[53,48,58,46],[53,50,58,48,"response"],[53,58,58,56],[53,59,58,57,"status"],[53,65,58,63],[53,67,58,65,"errorText"],[53,76,58,74],[53,77,58,75],[54,8,59,6],[54,14,59,12],[54,18,59,16,"Error"],[54,23,59,21],[54,24,59,22],[54,41,59,39,"response"],[54,49,59,47],[54,50,59,48,"status"],[54,56,59,54],[54,62,59,60,"errorText"],[54,71,59,69],[54,73,59,71],[54,74,59,72],[55,6,60,4],[56,6,62,4],[56,12,62,10,"result"],[56,18,62,16],[56,21,62,19],[56,27,62,25,"response"],[56,35,62,33],[56,36,62,34,"json"],[56,40,62,38],[56,41,62,39],[56,42,62,40],[57,6,63,4,"console"],[57,13,63,11],[57,14,63,12,"log"],[57,17,63,15],[57,18,63,16],[57,47,63,45],[57,49,63,47,"JSON"],[57,53,63,51],[57,54,63,52,"stringify"],[57,63,63,61],[57,64,63,62,"result"],[57,70,63,68],[57,71,63,69],[57,72,63,70,"substring"],[57,81,63,79],[57,82,63,80],[57,83,63,81],[57,85,63,83],[57,88,63,86],[57,89,63,87],[57,90,63,88],[59,6,65,4],[60,6,66,4],[60,12,66,10,"data"],[60,16,66,14],[60,19,66,17,"result"],[60,25,66,23],[60,26,66,24,"data"],[60,30,66,28],[60,34,66,32,"result"],[60,40,66,38],[62,6,68,4],[63,6,69,4],[63,10,69,8,"data"],[63,14,69,12],[63,15,69,13,"error"],[63,20,69,18],[63,22,69,20],[64,8,70,6,"console"],[64,15,70,13],[64,16,70,14,"log"],[64,19,70,17],[64,20,70,18],[64,52,70,50],[64,54,70,52,"data"],[64,58,70,56],[64,59,70,57,"error"],[64,64,70,62],[64,65,70,63],[65,8,71,6],[65,15,71,13],[66,10,72,8,"success"],[66,17,72,15],[66,19,72,17],[66,24,72,22],[67,10,73,8,"found"],[67,15,73,13],[67,17,73,15],[67,22,73,20],[68,10,74,8,"mode"],[68,14,74,12],[68,16,74,14],[68,22,74,20],[69,10,75,8,"error"],[69,15,75,13],[69,17,75,15,"data"],[69,21,75,19],[69,22,75,20,"error"],[70,8,76,6],[70,9,76,7],[71,6,77,4],[73,6,79,4],[74,6,80,4],[74,10,80,8,"data"],[74,14,80,12],[74,15,80,13,"success"],[74,22,80,20],[74,26,80,24,"data"],[74,30,80,28],[74,31,80,29,"found"],[74,36,80,34],[74,38,80,36],[75,8,81,6,"console"],[75,15,81,13],[75,16,81,14,"log"],[75,19,81,17],[75,20,81,18],[75,47,81,45],[75,49,81,47,"data"],[75,53,81,51],[75,54,81,52,"title"],[75,59,81,57],[75,61,81,59],[75,65,81,63],[75,67,81,65,"data"],[75,71,81,69],[75,72,81,70,"artist"],[75,78,81,76],[75,79,81,77],[76,8,82,6],[76,15,82,13],[77,10,83,8,"success"],[77,17,83,15],[77,19,83,17],[77,23,83,21],[78,10,84,8,"found"],[78,15,84,13],[78,17,84,15],[78,21,84,19],[79,10,85,8,"title"],[79,15,85,13],[79,17,85,15,"data"],[79,21,85,19],[79,22,85,20,"title"],[79,27,85,25],[79,31,85,29,"data"],[79,35,85,33],[79,36,85,34,"external_metadata"],[79,53,85,51],[79,55,85,53,"title"],[79,60,85,58],[79,64,85,62,"data"],[79,68,85,66],[79,69,85,67,"external_title"],[79,83,85,81],[80,10,86,8,"artist"],[80,16,86,14],[80,18,86,16,"data"],[80,22,86,20],[80,23,86,21,"artist"],[80,29,86,27],[80,33,86,31,"data"],[80,37,86,35],[80,38,86,36,"external_metadata"],[80,55,86,53],[80,57,86,55,"artist"],[80,63,86,61],[80,67,86,65,"data"],[80,71,86,69],[80,72,86,70,"external_artist"],[80,87,86,85],[81,10,87,8,"album"],[81,15,87,13],[81,17,87,15,"data"],[81,21,87,19],[81,22,87,20,"album"],[81,27,87,25],[82,10,88,8,"genre"],[82,15,88,13],[82,17,88,15,"data"],[82,21,88,19],[82,22,88,20,"genre"],[82,27,88,25],[83,10,89,8,"cover_image"],[83,21,89,19],[83,23,89,21,"data"],[83,27,89,25],[83,28,89,26,"cover_image"],[83,39,89,37],[83,43,89,41,"data"],[83,47,89,45],[83,48,89,46,"artwork_url"],[83,59,89,57],[84,10,90,8,"score"],[84,15,90,13],[84,17,90,15,"data"],[84,21,90,19],[84,22,90,20,"score"],[84,27,90,25],[85,10,91,8,"mode"],[85,14,91,12],[85,16,91,14,"data"],[85,20,91,18],[85,21,91,19,"mode"],[85,25,91,23],[85,29,91,27],[85,38,91,36],[86,10,92,8,"acr_id"],[86,16,92,14],[86,18,92,16,"data"],[86,22,92,20],[86,23,92,21,"acr_id"],[86,29,92,27],[87,10,93,8,"spynners_track_id"],[87,27,93,25],[87,29,93,27,"data"],[87,33,93,31],[87,34,93,32,"spynners_track_id"],[87,51,93,49],[88,10,94,8,"producer_id"],[88,21,94,19],[88,23,94,21,"data"],[88,27,94,25],[88,28,94,26,"producer_id"],[88,39,94,37],[89,10,95,8,"external_ids"],[89,22,95,20],[89,24,95,22,"data"],[89,28,95,26],[89,29,95,27,"external_ids"],[90,8,96,6],[90,9,96,7],[91,6,97,4],[93,6,99,4],[94,6,100,4],[94,10,100,8,"data"],[94,14,100,12],[94,15,100,13,"title"],[94,20,100,18],[94,24,100,22,"data"],[94,28,100,26],[94,29,100,27,"external_title"],[94,43,100,41],[94,45,100,43],[95,8,101,6,"console"],[95,15,101,13],[95,16,101,14,"log"],[95,19,101,17],[95,20,101,18],[95,52,101,50],[95,54,101,52,"data"],[95,58,101,56],[95,59,101,57,"title"],[95,64,101,62],[95,68,101,66,"data"],[95,72,101,70],[95,73,101,71,"external_title"],[95,87,101,85],[95,88,101,86],[96,8,102,6],[96,15,102,13],[97,10,103,8,"success"],[97,17,103,15],[97,19,103,17],[97,23,103,21],[98,10,104,8,"found"],[98,15,104,13],[98,17,104,15],[98,21,104,19],[99,10,105,8,"title"],[99,15,105,13],[99,17,105,15,"data"],[99,21,105,19],[99,22,105,20,"title"],[99,27,105,25],[99,31,105,29,"data"],[99,35,105,33],[99,36,105,34,"external_title"],[99,50,105,48],[100,10,106,8,"artist"],[100,16,106,14],[100,18,106,16,"data"],[100,22,106,20],[100,23,106,21,"artist"],[100,29,106,27],[100,33,106,31,"data"],[100,37,106,35],[100,38,106,36,"external_artist"],[100,53,106,51],[100,57,106,55],[100,73,106,71],[101,10,107,8,"album"],[101,15,107,13],[101,17,107,15,"data"],[101,21,107,19],[101,22,107,20,"album"],[101,27,107,25],[102,10,108,8,"genre"],[102,15,108,13],[102,17,108,15,"data"],[102,21,108,19],[102,22,108,20,"genre"],[102,27,108,25],[103,10,109,8,"cover_image"],[103,21,109,19],[103,23,109,21,"data"],[103,27,109,25],[103,28,109,26,"cover_image"],[103,39,109,37],[103,43,109,41,"data"],[103,47,109,45],[103,48,109,46,"artwork_url"],[103,59,109,57],[104,10,110,8,"score"],[104,15,110,13],[104,17,110,15,"data"],[104,21,110,19],[104,22,110,20,"score"],[104,27,110,25],[105,10,111,8,"mode"],[105,14,111,12],[105,16,111,14,"data"],[105,20,111,18],[105,21,111,19,"mode"],[105,25,111,23],[105,29,111,27],[105,38,111,36],[106,10,112,8,"acr_id"],[106,16,112,14],[106,18,112,16,"data"],[106,22,112,20],[106,23,112,21,"acr_id"],[106,29,112,27],[107,10,113,8,"spynners_track_id"],[107,27,113,25],[107,29,113,27,"data"],[107,33,113,31],[107,34,113,32,"spynners_track_id"],[107,51,113,49],[108,10,114,8,"producer_id"],[108,21,114,19],[108,23,114,21,"data"],[108,27,114,25],[108,28,114,26,"producer_id"],[108,39,114,37],[109,10,115,8,"external_ids"],[109,22,115,20],[109,24,115,22,"data"],[109,28,115,26],[109,29,115,27,"external_ids"],[110,8,116,6],[110,9,116,7],[111,6,117,4],[113,6,119,4],[114,6,120,4,"console"],[114,13,120,11],[114,14,120,12,"log"],[114,17,120,15],[114,18,120,16],[114,57,120,55],[114,58,120,56],[115,6,121,4],[115,13,121,11],[116,8,122,6,"success"],[116,15,122,13],[116,17,122,15],[116,21,122,19],[117,8,123,6,"found"],[117,13,123,11],[117,15,123,13],[117,20,123,18],[118,8,124,6,"mode"],[118,12,124,10],[118,14,124,12],[118,20,124,18],[119,8,125,6,"error"],[119,13,125,11],[119,15,125,13,"data"],[119,19,125,17],[119,20,125,18,"message"],[119,27,125,25],[119,31,125,29],[120,6,126,4],[120,7,126,5],[121,4,128,2],[121,5,128,3],[121,6,128,4],[121,13,128,11,"error"],[121,18,128,21],[121,20,128,23],[122,6,129,4,"console"],[122,13,129,11],[122,14,129,12,"error"],[122,19,129,17],[122,20,129,18],[122,51,129,49],[122,53,129,51,"error"],[122,58,129,56],[122,60,129,58,"message"],[122,67,129,65],[122,71,129,69,"error"],[122,76,129,74],[122,77,129,75],[123,6,130,4],[123,13,130,11],[124,8,131,6,"success"],[124,15,131,13],[124,17,131,15],[124,22,131,20],[125,8,132,6,"found"],[125,13,132,11],[125,15,132,13],[125,20,132,18],[126,8,133,6,"mode"],[126,12,133,10],[126,14,133,12],[126,20,133,18],[127,8,134,6,"error"],[127,13,134,11],[127,15,134,13,"error"],[127,20,134,18],[127,22,134,20,"message"],[127,29,134,27],[127,33,134,31],[128,6,135,4],[128,7,135,5],[129,4,136,2],[130,2,137,0],[131,2,139,0],[131,6,139,0,"_default"],[131,14,139,0],[131,17,139,15],[132,4,140,2,"recognizeAudioHybrid"],[133,2,141,0],[133,3,141,1],[134,0,141,2],[134,3]],"functionMap":{"names":["<global>","recognizeAudioHybrid"],"mappings":"AAA;OCoC;CDoG"},"hasCjsExports":false},"type":"js/module"}]}