{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":180},"end":{"line":8,"column":40,"index":220}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.recognizeAudioHybrid = recognizeAudioHybrid;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _reactNative = require(_dependencyMap[1], \"react-native\");\n  /**\n   * ACRCloud Recognition Service via Base44\n   * \n   * Uses the Base44 cloud function 'recognizeAudio' which handles\n   * ACRCloud integration server-side (same as the website).\n   */\n\n  // Base44 API configuration - same as website\n  var BASE44_API_URL = 'https://spynners.base44.app';\n  /**\n   * Call Base44 recognizeAudio function (same as website)\n   * This is the ONLY method - works on both web and mobile\n   */\n  function recognizeAudioHybrid(_x) {\n    return _recognizeAudioHybrid.apply(this, arguments);\n  }\n  function _recognizeAudioHybrid() {\n    _recognizeAudioHybrid = (0, _asyncToGenerator.default)(function* (audioBase64) {\n      console.log('[ACRCloud] Starting recognition via Base44...');\n      console.log('[ACRCloud] Audio data length:', audioBase64.length, 'Platform:', _reactNative.Platform.OS);\n      try {\n        // Call Base44 function directly - EXACTLY like the website does\n        // base44.functions.invoke('recognizeAudio', { audio_data, sample_rate, channels })\n        var response = yield fetch(`${BASE44_API_URL}/api/functions/recognizeAudio`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            audio_data: audioBase64,\n            sample_rate: 48000,\n            channels: 2\n          })\n        });\n        if (!response.ok) {\n          var errorText = yield response.text();\n          console.error('[ACRCloud] Base44 error:', response.status, errorText);\n          throw new Error(`Base44 error: ${response.status} - ${errorText}`);\n        }\n        var result = yield response.json();\n        console.log('[ACRCloud] Base44 response:', JSON.stringify(result).substring(0, 500));\n\n        // Parse response - Base44 function may return data in 'data' field or directly\n        var data = result.data || result;\n\n        // Check for error in response\n        if (data.error) {\n          console.log('[ACRCloud] API returned error:', data.error);\n          return {\n            success: false,\n            found: false,\n            mode: 'none',\n            error: data.error\n          };\n        }\n\n        // Check if track was found\n        if (data.success && data.found) {\n          console.log('[ACRCloud] ✅ Track found:', data.title, 'by', data.artist);\n          return {\n            success: true,\n            found: true,\n            title: data.title || data.external_metadata?.title || data.external_title,\n            artist: data.artist || data.external_metadata?.artist || data.external_artist,\n            album: data.album,\n            genre: data.genre,\n            cover_image: data.cover_image || data.artwork_url,\n            score: data.score,\n            mode: data.mode || 'offline',\n            acr_id: data.acr_id,\n            spynners_track_id: data.spynners_track_id,\n            producer_id: data.producer_id,\n            external_ids: data.external_ids\n          };\n        }\n\n        // Check if we found track info even without explicit 'found' flag\n        if (data.title || data.external_title) {\n          console.log('[ACRCloud] ✅ Track info found:', data.title || data.external_title);\n          return {\n            success: true,\n            found: true,\n            title: data.title || data.external_title,\n            artist: data.artist || data.external_artist || 'Unknown Artist',\n            album: data.album,\n            genre: data.genre,\n            cover_image: data.cover_image || data.artwork_url,\n            score: data.score,\n            mode: data.mode || 'offline',\n            acr_id: data.acr_id,\n            spynners_track_id: data.spynners_track_id,\n            producer_id: data.producer_id,\n            external_ids: data.external_ids\n          };\n        }\n\n        // No match found\n        console.log('[ACRCloud] No track found in response');\n        return {\n          success: true,\n          found: false,\n          mode: 'none',\n          error: data.message || 'No track found'\n        };\n      } catch (error) {\n        console.error('[ACRCloud] Recognition error:', error?.message || error);\n        return {\n          success: false,\n          found: false,\n          mode: 'none',\n          error: error?.message || 'Recognition failed'\n        };\n      }\n    });\n    return _recognizeAudioHybrid.apply(this, arguments);\n  }\n  var _default = {\n    recognizeAudioHybrid\n  };\n});","lineCount":141,"map":[[12,2,139,0,"Object"],[12,8,139,0],[12,9,139,0,"defineProperty"],[12,23,139,0],[12,24,139,0,"exports"],[12,31,139,0],[13,4,139,0,"enumerable"],[13,14,139,0],[14,4,139,0,"get"],[14,7,139,0],[14,18,139,0,"get"],[14,19,139,0],[15,6,139,0],[15,13,139,0,"_default"],[15,21,139,0],[16,4,139,0],[17,2,139,0],[18,2,37,0,"exports"],[18,9,37,0],[18,10,37,0,"recognizeAudioHybrid"],[18,30,37,0],[18,33,37,0,"recognizeAudioHybrid"],[18,53,37,0],[19,2,137,1],[19,6,137,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,137,1],[19,45,137,1,"require"],[19,52,137,1],[19,53,137,1,"_dependencyMap"],[19,67,137,1],[20,2,137,1],[20,6,137,1,"_asyncToGenerator"],[20,23,137,1],[20,26,137,1,"_interopDefault"],[20,41,137,1],[20,42,137,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,137,1],[21,2,8,0],[21,6,8,0,"_reactNative"],[21,18,8,0],[21,21,8,0,"require"],[21,28,8,0],[21,29,8,0,"_dependencyMap"],[21,43,8,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[27,0,6,0],[29,2,10,0],[30,2,11,0],[30,6,11,6,"BASE44_API_URL"],[30,20,11,20],[30,23,11,23],[30,52,11,52],[31,2,33,0],[32,0,34,0],[33,0,35,0],[34,0,36,0],[35,2,33,0],[35,11,37,22,"recognizeAudioHybrid"],[35,31,37,42,"recognizeAudioHybrid"],[35,32,37,42,"_x"],[35,34,37,42],[36,4,37,42],[36,11,37,42,"_recognizeAudioHybrid"],[36,32,37,42],[36,33,37,42,"apply"],[36,38,37,42],[36,45,37,42,"arguments"],[36,54,37,42],[37,2,37,42],[38,2,37,42],[38,11,37,42,"_recognizeAudioHybrid"],[38,33,37,42],[39,4,37,42,"_recognizeAudioHybrid"],[39,25,37,42],[39,32,37,42,"_asyncToGenerator"],[39,49,37,42],[39,50,37,42,"default"],[39,57,37,42],[39,59,37,7],[39,70,37,43,"audioBase64"],[39,81,37,62],[39,83,37,89],[40,6,38,2,"console"],[40,13,38,9],[40,14,38,10,"log"],[40,17,38,13],[40,18,38,14],[40,65,38,61],[40,66,38,62],[41,6,39,2,"console"],[41,13,39,9],[41,14,39,10,"log"],[41,17,39,13],[41,18,39,14],[41,49,39,45],[41,51,39,47,"audioBase64"],[41,62,39,58],[41,63,39,59,"length"],[41,69,39,65],[41,71,39,67],[41,82,39,78],[41,84,39,80,"Platform"],[41,96,39,88],[41,97,39,88,"Platform"],[41,105,39,88],[41,106,39,89,"OS"],[41,108,39,91],[41,109,39,92],[42,6,41,2],[42,10,41,6],[43,8,42,4],[44,8,43,4],[45,8,44,4],[45,12,44,10,"response"],[45,20,44,18],[45,29,44,27,"fetch"],[45,34,44,32],[45,35,44,33],[45,38,44,36,"BASE44_API_URL"],[45,52,44,50],[45,83,44,81],[45,85,44,83],[46,10,45,6,"method"],[46,16,45,12],[46,18,45,14],[46,24,45,20],[47,10,46,6,"headers"],[47,17,46,13],[47,19,46,15],[48,12,47,8],[48,26,47,22],[48,28,47,24],[49,10,48,6],[49,11,48,7],[50,10,49,6,"body"],[50,14,49,10],[50,16,49,12,"JSON"],[50,20,49,16],[50,21,49,17,"stringify"],[50,30,49,26],[50,31,49,27],[51,12,50,8,"audio_data"],[51,22,50,18],[51,24,50,20,"audioBase64"],[51,35,50,31],[52,12,51,8,"sample_rate"],[52,23,51,19],[52,25,51,21],[52,30,51,26],[53,12,52,8,"channels"],[53,20,52,16],[53,22,52,18],[54,10,53,6],[54,11,53,7],[55,8,54,4],[55,9,54,5],[55,10,54,6],[56,8,56,4],[56,12,56,8],[56,13,56,9,"response"],[56,21,56,17],[56,22,56,18,"ok"],[56,24,56,20],[56,26,56,22],[57,10,57,6],[57,14,57,12,"errorText"],[57,23,57,21],[57,32,57,30,"response"],[57,40,57,38],[57,41,57,39,"text"],[57,45,57,43],[57,46,57,44],[57,47,57,45],[58,10,58,6,"console"],[58,17,58,13],[58,18,58,14,"error"],[58,23,58,19],[58,24,58,20],[58,50,58,46],[58,52,58,48,"response"],[58,60,58,56],[58,61,58,57,"status"],[58,67,58,63],[58,69,58,65,"errorText"],[58,78,58,74],[58,79,58,75],[59,10,59,6],[59,16,59,12],[59,20,59,16,"Error"],[59,25,59,21],[59,26,59,22],[59,43,59,39,"response"],[59,51,59,47],[59,52,59,48,"status"],[59,58,59,54],[59,64,59,60,"errorText"],[59,73,59,69],[59,75,59,71],[59,76,59,72],[60,8,60,4],[61,8,62,4],[61,12,62,10,"result"],[61,18,62,16],[61,27,62,25,"response"],[61,35,62,33],[61,36,62,34,"json"],[61,40,62,38],[61,41,62,39],[61,42,62,40],[62,8,63,4,"console"],[62,15,63,11],[62,16,63,12,"log"],[62,19,63,15],[62,20,63,16],[62,49,63,45],[62,51,63,47,"JSON"],[62,55,63,51],[62,56,63,52,"stringify"],[62,65,63,61],[62,66,63,62,"result"],[62,72,63,68],[62,73,63,69],[62,74,63,70,"substring"],[62,83,63,79],[62,84,63,80],[62,85,63,81],[62,87,63,83],[62,90,63,86],[62,91,63,87],[62,92,63,88],[64,8,65,4],[65,8,66,4],[65,12,66,10,"data"],[65,16,66,14],[65,19,66,17,"result"],[65,25,66,23],[65,26,66,24,"data"],[65,30,66,28],[65,34,66,32,"result"],[65,40,66,38],[67,8,68,4],[68,8,69,4],[68,12,69,8,"data"],[68,16,69,12],[68,17,69,13,"error"],[68,22,69,18],[68,24,69,20],[69,10,70,6,"console"],[69,17,70,13],[69,18,70,14,"log"],[69,21,70,17],[69,22,70,18],[69,54,70,50],[69,56,70,52,"data"],[69,60,70,56],[69,61,70,57,"error"],[69,66,70,62],[69,67,70,63],[70,10,71,6],[70,17,71,13],[71,12,72,8,"success"],[71,19,72,15],[71,21,72,17],[71,26,72,22],[72,12,73,8,"found"],[72,17,73,13],[72,19,73,15],[72,24,73,20],[73,12,74,8,"mode"],[73,16,74,12],[73,18,74,14],[73,24,74,20],[74,12,75,8,"error"],[74,17,75,13],[74,19,75,15,"data"],[74,23,75,19],[74,24,75,20,"error"],[75,10,76,6],[75,11,76,7],[76,8,77,4],[78,8,79,4],[79,8,80,4],[79,12,80,8,"data"],[79,16,80,12],[79,17,80,13,"success"],[79,24,80,20],[79,28,80,24,"data"],[79,32,80,28],[79,33,80,29,"found"],[79,38,80,34],[79,40,80,36],[80,10,81,6,"console"],[80,17,81,13],[80,18,81,14,"log"],[80,21,81,17],[80,22,81,18],[80,49,81,45],[80,51,81,47,"data"],[80,55,81,51],[80,56,81,52,"title"],[80,61,81,57],[80,63,81,59],[80,67,81,63],[80,69,81,65,"data"],[80,73,81,69],[80,74,81,70,"artist"],[80,80,81,76],[80,81,81,77],[81,10,82,6],[81,17,82,13],[82,12,83,8,"success"],[82,19,83,15],[82,21,83,17],[82,25,83,21],[83,12,84,8,"found"],[83,17,84,13],[83,19,84,15],[83,23,84,19],[84,12,85,8,"title"],[84,17,85,13],[84,19,85,15,"data"],[84,23,85,19],[84,24,85,20,"title"],[84,29,85,25],[84,33,85,29,"data"],[84,37,85,33],[84,38,85,34,"external_metadata"],[84,55,85,51],[84,57,85,53,"title"],[84,62,85,58],[84,66,85,62,"data"],[84,70,85,66],[84,71,85,67,"external_title"],[84,85,85,81],[85,12,86,8,"artist"],[85,18,86,14],[85,20,86,16,"data"],[85,24,86,20],[85,25,86,21,"artist"],[85,31,86,27],[85,35,86,31,"data"],[85,39,86,35],[85,40,86,36,"external_metadata"],[85,57,86,53],[85,59,86,55,"artist"],[85,65,86,61],[85,69,86,65,"data"],[85,73,86,69],[85,74,86,70,"external_artist"],[85,89,86,85],[86,12,87,8,"album"],[86,17,87,13],[86,19,87,15,"data"],[86,23,87,19],[86,24,87,20,"album"],[86,29,87,25],[87,12,88,8,"genre"],[87,17,88,13],[87,19,88,15,"data"],[87,23,88,19],[87,24,88,20,"genre"],[87,29,88,25],[88,12,89,8,"cover_image"],[88,23,89,19],[88,25,89,21,"data"],[88,29,89,25],[88,30,89,26,"cover_image"],[88,41,89,37],[88,45,89,41,"data"],[88,49,89,45],[88,50,89,46,"artwork_url"],[88,61,89,57],[89,12,90,8,"score"],[89,17,90,13],[89,19,90,15,"data"],[89,23,90,19],[89,24,90,20,"score"],[89,29,90,25],[90,12,91,8,"mode"],[90,16,91,12],[90,18,91,14,"data"],[90,22,91,18],[90,23,91,19,"mode"],[90,27,91,23],[90,31,91,27],[90,40,91,36],[91,12,92,8,"acr_id"],[91,18,92,14],[91,20,92,16,"data"],[91,24,92,20],[91,25,92,21,"acr_id"],[91,31,92,27],[92,12,93,8,"spynners_track_id"],[92,29,93,25],[92,31,93,27,"data"],[92,35,93,31],[92,36,93,32,"spynners_track_id"],[92,53,93,49],[93,12,94,8,"producer_id"],[93,23,94,19],[93,25,94,21,"data"],[93,29,94,25],[93,30,94,26,"producer_id"],[93,41,94,37],[94,12,95,8,"external_ids"],[94,24,95,20],[94,26,95,22,"data"],[94,30,95,26],[94,31,95,27,"external_ids"],[95,10,96,6],[95,11,96,7],[96,8,97,4],[98,8,99,4],[99,8,100,4],[99,12,100,8,"data"],[99,16,100,12],[99,17,100,13,"title"],[99,22,100,18],[99,26,100,22,"data"],[99,30,100,26],[99,31,100,27,"external_title"],[99,45,100,41],[99,47,100,43],[100,10,101,6,"console"],[100,17,101,13],[100,18,101,14,"log"],[100,21,101,17],[100,22,101,18],[100,54,101,50],[100,56,101,52,"data"],[100,60,101,56],[100,61,101,57,"title"],[100,66,101,62],[100,70,101,66,"data"],[100,74,101,70],[100,75,101,71,"external_title"],[100,89,101,85],[100,90,101,86],[101,10,102,6],[101,17,102,13],[102,12,103,8,"success"],[102,19,103,15],[102,21,103,17],[102,25,103,21],[103,12,104,8,"found"],[103,17,104,13],[103,19,104,15],[103,23,104,19],[104,12,105,8,"title"],[104,17,105,13],[104,19,105,15,"data"],[104,23,105,19],[104,24,105,20,"title"],[104,29,105,25],[104,33,105,29,"data"],[104,37,105,33],[104,38,105,34,"external_title"],[104,52,105,48],[105,12,106,8,"artist"],[105,18,106,14],[105,20,106,16,"data"],[105,24,106,20],[105,25,106,21,"artist"],[105,31,106,27],[105,35,106,31,"data"],[105,39,106,35],[105,40,106,36,"external_artist"],[105,55,106,51],[105,59,106,55],[105,75,106,71],[106,12,107,8,"album"],[106,17,107,13],[106,19,107,15,"data"],[106,23,107,19],[106,24,107,20,"album"],[106,29,107,25],[107,12,108,8,"genre"],[107,17,108,13],[107,19,108,15,"data"],[107,23,108,19],[107,24,108,20,"genre"],[107,29,108,25],[108,12,109,8,"cover_image"],[108,23,109,19],[108,25,109,21,"data"],[108,29,109,25],[108,30,109,26,"cover_image"],[108,41,109,37],[108,45,109,41,"data"],[108,49,109,45],[108,50,109,46,"artwork_url"],[108,61,109,57],[109,12,110,8,"score"],[109,17,110,13],[109,19,110,15,"data"],[109,23,110,19],[109,24,110,20,"score"],[109,29,110,25],[110,12,111,8,"mode"],[110,16,111,12],[110,18,111,14,"data"],[110,22,111,18],[110,23,111,19,"mode"],[110,27,111,23],[110,31,111,27],[110,40,111,36],[111,12,112,8,"acr_id"],[111,18,112,14],[111,20,112,16,"data"],[111,24,112,20],[111,25,112,21,"acr_id"],[111,31,112,27],[112,12,113,8,"spynners_track_id"],[112,29,113,25],[112,31,113,27,"data"],[112,35,113,31],[112,36,113,32,"spynners_track_id"],[112,53,113,49],[113,12,114,8,"producer_id"],[113,23,114,19],[113,25,114,21,"data"],[113,29,114,25],[113,30,114,26,"producer_id"],[113,41,114,37],[114,12,115,8,"external_ids"],[114,24,115,20],[114,26,115,22,"data"],[114,30,115,26],[114,31,115,27,"external_ids"],[115,10,116,6],[115,11,116,7],[116,8,117,4],[118,8,119,4],[119,8,120,4,"console"],[119,15,120,11],[119,16,120,12,"log"],[119,19,120,15],[119,20,120,16],[119,59,120,55],[119,60,120,56],[120,8,121,4],[120,15,121,11],[121,10,122,6,"success"],[121,17,122,13],[121,19,122,15],[121,23,122,19],[122,10,123,6,"found"],[122,15,123,11],[122,17,123,13],[122,22,123,18],[123,10,124,6,"mode"],[123,14,124,10],[123,16,124,12],[123,22,124,18],[124,10,125,6,"error"],[124,15,125,11],[124,17,125,13,"data"],[124,21,125,17],[124,22,125,18,"message"],[124,29,125,25],[124,33,125,29],[125,8,126,4],[125,9,126,5],[126,6,128,2],[126,7,128,3],[126,8,128,4],[126,15,128,11,"error"],[126,20,128,21],[126,22,128,23],[127,8,129,4,"console"],[127,15,129,11],[127,16,129,12,"error"],[127,21,129,17],[127,22,129,18],[127,53,129,49],[127,55,129,51,"error"],[127,60,129,56],[127,62,129,58,"message"],[127,69,129,65],[127,73,129,69,"error"],[127,78,129,74],[127,79,129,75],[128,8,130,4],[128,15,130,11],[129,10,131,6,"success"],[129,17,131,13],[129,19,131,15],[129,24,131,20],[130,10,132,6,"found"],[130,15,132,11],[130,17,132,13],[130,22,132,18],[131,10,133,6,"mode"],[131,14,133,10],[131,16,133,12],[131,22,133,18],[132,10,134,6,"error"],[132,15,134,11],[132,17,134,13,"error"],[132,22,134,18],[132,24,134,20,"message"],[132,31,134,27],[132,35,134,31],[133,8,135,4],[133,9,135,5],[134,6,136,2],[135,4,137,0],[135,5,137,1],[136,4,137,1],[136,11,137,1,"_recognizeAudioHybrid"],[136,32,137,1],[136,33,137,1,"apply"],[136,38,137,1],[136,45,137,1,"arguments"],[136,54,137,1],[137,2,137,1],[138,2,139,0],[138,6,139,0,"_default"],[138,14,139,0],[138,17,139,15],[139,4,140,2,"recognizeAudioHybrid"],[140,2,141,0],[140,3,141,1],[141,0,141,2],[141,3]],"functionMap":{"names":["<global>","recognizeAudioHybrid"],"mappings":"AAA;OCoC;CDoG"},"hasCjsExports":false},"type":"js/module"}]}