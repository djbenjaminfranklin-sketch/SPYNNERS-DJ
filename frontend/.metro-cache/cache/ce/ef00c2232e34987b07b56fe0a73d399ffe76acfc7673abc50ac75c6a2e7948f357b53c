{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/base44Api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":57,"index":206}}],"key":"RsPhvxCr5uArxZjYXlgxcThRvjE=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesBase44Api = require(_dependencyMap[2], \"../services/base44Api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        console.log('[AuthContext] Loading stored auth...');\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          console.log('[AuthContext] Found stored auth, restoring session');\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n\n          // Optionally verify token by fetching current user\n          try {\n            const currentUser = await _servicesBase44Api.base44Auth.me();\n            if (currentUser) {\n              console.log('[AuthContext] Token verified, user:', currentUser.email);\n              setUser(currentUser);\n              await AsyncStorage.default.setItem('user', JSON.stringify(currentUser));\n            }\n          } catch (verifyError) {\n            console.log('[AuthContext] Token verification skipped/failed');\n          }\n        } else {\n          console.log('[AuthContext] No stored auth found');\n        }\n      } catch (error) {\n        console.error('[AuthContext] Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        console.log('[AuthContext] Attempting login for:', email);\n        const result = await _servicesBase44Api.base44Auth.login(email, password);\n        console.log('[AuthContext] Login successful');\n        setToken(result.token);\n        setUser(result.user);\n      } catch (error) {\n        console.error('[AuthContext] Login error:', error?.message || error);\n        throw error;\n      }\n    };\n    const signup = async (email, password, fullName, userType) => {\n      try {\n        console.log('[AuthContext] Attempting signup for:', email);\n        const result = await _servicesBase44Api.base44Auth.signup(email, password, fullName, userType);\n        console.log('[AuthContext] Signup successful');\n        setToken(result.token);\n        setUser({\n          ...result.user,\n          user_type: userType\n        });\n      } catch (error) {\n        console.error('[AuthContext] Signup error:', error?.message || error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        console.log('[AuthContext] Logging out...');\n        await _servicesBase44Api.base44Auth.logout();\n        setToken(null);\n        setUser(null);\n        console.log('[AuthContext] Logged out successfully');\n      } catch (error) {\n        console.error('[AuthContext] Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        signup,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":121,"map":[[13,2,16,0,"exports"],[13,9,16,0],[13,10,16,0,"AuthProvider"],[13,22,16,0],[13,25,16,0,"AuthProvider"],[13,37,16,0],[14,2,111,0,"exports"],[14,9,111,0],[14,10,111,0,"useAuth"],[14,17,111,0],[14,20,111,0,"useAuth"],[14,27,111,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_servicesBase44Api"],[18,24,3,0],[18,27,3,0,"require"],[18,34,3,0],[18,35,3,0,"_dependencyMap"],[18,49,3,0],[19,2,3,57],[19,6,3,57,"_reactJsxDevRuntime"],[19,25,3,57],[19,28,3,57,"require"],[19,35,3,57],[19,36,3,57,"_dependencyMap"],[19,50,3,57],[20,2,14,0],[20,8,14,6,"AuthContext"],[20,19,14,17],[20,35,14,20],[20,39,14,20,"createContext"],[20,45,14,33],[20,46,14,33,"createContext"],[20,59,14,33],[20,61,14,63,"undefined"],[20,70,14,72],[20,71,14,73],[21,2,16,7],[21,11,16,16,"AuthProvider"],[21,23,16,28,"AuthProvider"],[21,24,16,29],[22,4,16,31,"children"],[23,2,16,71],[23,3,16,72],[23,5,16,74],[24,4,17,2],[24,10,17,8],[24,11,17,9,"user"],[24,15,17,13],[24,17,17,15,"setUser"],[24,24,17,22],[24,25,17,23],[24,28,17,26],[24,32,17,26,"useState"],[24,38,17,34],[24,39,17,34,"useState"],[24,47,17,34],[24,49,17,48],[24,53,17,52],[24,54,17,53],[25,4,18,2],[25,10,18,8],[25,11,18,9,"token"],[25,16,18,14],[25,18,18,16,"setToken"],[25,26,18,24],[25,27,18,25],[25,30,18,28],[25,34,18,28,"useState"],[25,40,18,36],[25,41,18,36,"useState"],[25,49,18,36],[25,51,18,52],[25,55,18,56],[25,56,18,57],[26,4,19,2],[26,10,19,8],[26,11,19,9,"loading"],[26,18,19,16],[26,20,19,18,"setLoading"],[26,30,19,28],[26,31,19,29],[26,34,19,32],[26,38,19,32,"useState"],[26,44,19,40],[26,45,19,40,"useState"],[26,53,19,40],[26,55,19,41],[26,59,19,45],[26,60,19,46],[27,4,21,2],[27,8,21,2,"useEffect"],[27,14,21,11],[27,15,21,11,"useEffect"],[27,24,21,11],[27,26,21,12],[27,32,21,18],[28,6,22,4,"loadStoredAuth"],[28,20,22,18],[28,21,22,19],[28,22,22,20],[29,4,23,2],[29,5,23,3],[29,7,23,5],[29,9,23,7],[29,10,23,8],[30,4,25,2],[30,10,25,8,"loadStoredAuth"],[30,24,25,22],[30,27,25,25],[30,33,25,25,"loadStoredAuth"],[30,34,25,25],[30,39,25,37],[31,6,26,4],[31,10,26,8],[32,8,27,6,"console"],[32,15,27,13],[32,16,27,14,"log"],[32,19,27,17],[32,20,27,18],[32,58,27,56],[32,59,27,57],[33,8,28,6],[33,14,28,12,"storedToken"],[33,25,28,23],[33,28,28,26],[33,34,28,32,"AsyncStorage"],[33,46,28,44],[33,47,28,44,"default"],[33,54,28,44],[33,55,28,45,"getItem"],[33,62,28,52],[33,63,28,53],[33,75,28,65],[33,76,28,66],[34,8,29,6],[34,14,29,12,"storedUser"],[34,24,29,22],[34,27,29,25],[34,33,29,31,"AsyncStorage"],[34,45,29,43],[34,46,29,43,"default"],[34,53,29,43],[34,54,29,44,"getItem"],[34,61,29,51],[34,62,29,52],[34,68,29,58],[34,69,29,59],[35,8,31,6],[35,12,31,10,"storedToken"],[35,23,31,21],[35,27,31,25,"storedUser"],[35,37,31,35],[35,39,31,37],[36,10,32,8,"console"],[36,17,32,15],[36,18,32,16,"log"],[36,21,32,19],[36,22,32,20],[36,74,32,72],[36,75,32,73],[37,10,33,8,"setToken"],[37,18,33,16],[37,19,33,17,"storedToken"],[37,30,33,28],[37,31,33,29],[38,10,34,8,"setUser"],[38,17,34,15],[38,18,34,16,"JSON"],[38,22,34,20],[38,23,34,21,"parse"],[38,28,34,26],[38,29,34,27,"storedUser"],[38,39,34,37],[38,40,34,38],[38,41,34,39],[40,10,36,8],[41,10,37,8],[41,14,37,12],[42,12,38,10],[42,18,38,16,"currentUser"],[42,29,38,27],[42,32,38,30],[42,38,38,36,"base44Auth"],[42,56,38,46],[42,57,38,46,"base44Auth"],[42,67,38,46],[42,68,38,47,"me"],[42,70,38,49],[42,71,38,50],[42,72,38,51],[43,12,39,10],[43,16,39,14,"currentUser"],[43,27,39,25],[43,29,39,27],[44,14,40,12,"console"],[44,21,40,19],[44,22,40,20,"log"],[44,25,40,23],[44,26,40,24],[44,63,40,61],[44,65,40,63,"currentUser"],[44,76,40,74],[44,77,40,75,"email"],[44,82,40,80],[44,83,40,81],[45,14,41,12,"setUser"],[45,21,41,19],[45,22,41,20,"currentUser"],[45,33,41,31],[45,34,41,32],[46,14,42,12],[46,20,42,18,"AsyncStorage"],[46,32,42,30],[46,33,42,30,"default"],[46,40,42,30],[46,41,42,31,"setItem"],[46,48,42,38],[46,49,42,39],[46,55,42,45],[46,57,42,47,"JSON"],[46,61,42,51],[46,62,42,52,"stringify"],[46,71,42,61],[46,72,42,62,"currentUser"],[46,83,42,73],[46,84,42,74],[46,85,42,75],[47,12,43,10],[48,10,44,8],[48,11,44,9],[48,12,44,10],[48,19,44,17,"verifyError"],[48,30,44,28],[48,32,44,30],[49,12,45,10,"console"],[49,19,45,17],[49,20,45,18,"log"],[49,23,45,21],[49,24,45,22],[49,73,45,71],[49,74,45,72],[50,10,46,8],[51,8,47,6],[51,9,47,7],[51,15,47,13],[52,10,48,8,"console"],[52,17,48,15],[52,18,48,16,"log"],[52,21,48,19],[52,22,48,20],[52,58,48,56],[52,59,48,57],[53,8,49,6],[54,6,50,4],[54,7,50,5],[54,8,50,6],[54,15,50,13,"error"],[54,20,50,18],[54,22,50,20],[55,8,51,6,"console"],[55,15,51,13],[55,16,51,14,"error"],[55,21,51,19],[55,22,51,20],[55,57,51,55],[55,59,51,57,"error"],[55,64,51,62],[55,65,51,63],[56,6,52,4],[56,7,52,5],[56,16,52,14],[57,8,53,6,"setLoading"],[57,18,53,16],[57,19,53,17],[57,24,53,22],[57,25,53,23],[58,6,54,4],[59,4,55,2],[59,5,55,3],[60,4,57,2],[60,10,57,8,"login"],[60,15,57,13],[60,18,57,16],[60,24,57,16,"login"],[60,25,57,23,"email"],[60,30,57,36],[60,32,57,38,"password"],[60,40,57,54],[60,45,57,59],[61,6,58,4],[61,10,58,8],[62,8,59,6,"console"],[62,15,59,13],[62,16,59,14,"log"],[62,19,59,17],[62,20,59,18],[62,57,59,55],[62,59,59,57,"email"],[62,64,59,62],[62,65,59,63],[63,8,61,6],[63,14,61,12,"result"],[63,20,61,18],[63,23,61,21],[63,29,61,27,"base44Auth"],[63,47,61,37],[63,48,61,37,"base44Auth"],[63,58,61,37],[63,59,61,38,"login"],[63,64,61,43],[63,65,61,44,"email"],[63,70,61,49],[63,72,61,51,"password"],[63,80,61,59],[63,81,61,60],[64,8,63,6,"console"],[64,15,63,13],[64,16,63,14,"log"],[64,19,63,17],[64,20,63,18],[64,52,63,50],[64,53,63,51],[65,8,65,6,"setToken"],[65,16,65,14],[65,17,65,15,"result"],[65,23,65,21],[65,24,65,22,"token"],[65,29,65,27],[65,30,65,28],[66,8,66,6,"setUser"],[66,15,66,13],[66,16,66,14,"result"],[66,22,66,20],[66,23,66,21,"user"],[66,27,66,25],[66,28,66,26],[67,6,67,4],[67,7,67,5],[67,8,67,6],[67,15,67,13,"error"],[67,20,67,23],[67,22,67,25],[68,8,68,6,"console"],[68,15,68,13],[68,16,68,14,"error"],[68,21,68,19],[68,22,68,20],[68,50,68,48],[68,52,68,50,"error"],[68,57,68,55],[68,59,68,57,"message"],[68,66,68,64],[68,70,68,68,"error"],[68,75,68,73],[68,76,68,74],[69,8,69,6],[69,14,69,12,"error"],[69,19,69,17],[70,6,70,4],[71,4,71,2],[71,5,71,3],[72,4,73,2],[72,10,73,8,"signup"],[72,16,73,14],[72,19,73,17],[72,25,73,17,"signup"],[72,26,73,24,"email"],[72,31,73,37],[72,33,73,39,"password"],[72,41,73,55],[72,43,73,57,"fullName"],[72,51,73,73],[72,53,73,75,"userType"],[72,61,73,92],[72,66,73,97],[73,6,74,4],[73,10,74,8],[74,8,75,6,"console"],[74,15,75,13],[74,16,75,14,"log"],[74,19,75,17],[74,20,75,18],[74,58,75,56],[74,60,75,58,"email"],[74,65,75,63],[74,66,75,64],[75,8,77,6],[75,14,77,12,"result"],[75,20,77,18],[75,23,77,21],[75,29,77,27,"base44Auth"],[75,47,77,37],[75,48,77,37,"base44Auth"],[75,58,77,37],[75,59,77,38,"signup"],[75,65,77,44],[75,66,77,45,"email"],[75,71,77,50],[75,73,77,52,"password"],[75,81,77,60],[75,83,77,62,"fullName"],[75,91,77,70],[75,93,77,72,"userType"],[75,101,77,80],[75,102,77,81],[76,8,79,6,"console"],[76,15,79,13],[76,16,79,14,"log"],[76,19,79,17],[76,20,79,18],[76,53,79,51],[76,54,79,52],[77,8,81,6,"setToken"],[77,16,81,14],[77,17,81,15,"result"],[77,23,81,21],[77,24,81,22,"token"],[77,29,81,27],[77,30,81,28],[78,8,82,6,"setUser"],[78,15,82,13],[78,16,82,14],[79,10,82,16],[79,13,82,19,"result"],[79,19,82,25],[79,20,82,26,"user"],[79,24,82,30],[80,10,82,32,"user_type"],[80,19,82,41],[80,21,82,43,"userType"],[81,8,82,52],[81,9,82,53],[81,10,82,54],[82,6,83,4],[82,7,83,5],[82,8,83,6],[82,15,83,13,"error"],[82,20,83,23],[82,22,83,25],[83,8,84,6,"console"],[83,15,84,13],[83,16,84,14,"error"],[83,21,84,19],[83,22,84,20],[83,51,84,49],[83,53,84,51,"error"],[83,58,84,56],[83,60,84,58,"message"],[83,67,84,65],[83,71,84,69,"error"],[83,76,84,74],[83,77,84,75],[84,8,85,6],[84,14,85,12,"error"],[84,19,85,17],[85,6,86,4],[86,4,87,2],[86,5,87,3],[87,4,89,2],[87,10,89,8,"logout"],[87,16,89,14],[87,19,89,17],[87,25,89,17,"logout"],[87,26,89,17],[87,31,89,29],[88,6,90,4],[88,10,90,8],[89,8,91,6,"console"],[89,15,91,13],[89,16,91,14,"log"],[89,19,91,17],[89,20,91,18],[89,50,91,48],[89,51,91,49],[90,8,93,6],[90,14,93,12,"base44Auth"],[90,32,93,22],[90,33,93,22,"base44Auth"],[90,43,93,22],[90,44,93,23,"logout"],[90,50,93,29],[90,51,93,30],[90,52,93,31],[91,8,95,6,"setToken"],[91,16,95,14],[91,17,95,15],[91,21,95,19],[91,22,95,20],[92,8,96,6,"setUser"],[92,15,96,13],[92,16,96,14],[92,20,96,18],[92,21,96,19],[93,8,98,6,"console"],[93,15,98,13],[93,16,98,14,"log"],[93,19,98,17],[93,20,98,18],[93,59,98,57],[93,60,98,58],[94,6,99,4],[94,7,99,5],[94,8,99,6],[94,15,99,13,"error"],[94,20,99,18],[94,22,99,20],[95,8,100,6,"console"],[95,15,100,13],[95,16,100,14,"error"],[95,21,100,19],[95,22,100,20],[95,51,100,49],[95,53,100,51,"error"],[95,58,100,56],[95,59,100,57],[96,6,101,4],[97,4,102,2],[97,5,102,3],[98,4,104,2],[98,24,105,4],[98,28,105,4,"_reactJsxDevRuntime"],[98,47,105,4],[98,48,105,4,"jsxDEV"],[98,54,105,4],[98,56,105,5,"AuthContext"],[98,67,105,16],[98,68,105,17,"Provider"],[98,76,105,25],[99,6,105,26,"value"],[99,11,105,31],[99,13,105,33],[100,8,105,35,"user"],[100,12,105,39],[101,8,105,41,"token"],[101,13,105,46],[102,8,105,48,"loading"],[102,15,105,55],[103,8,105,57,"login"],[103,13,105,62],[104,8,105,64,"signup"],[104,14,105,70],[105,8,105,72,"logout"],[106,6,105,79],[106,7,105,81],[107,6,105,81,"children"],[107,14,105,81],[107,16,106,7,"children"],[108,4,106,15],[109,6,106,15,"fileName"],[109,14,106,15],[109,16,106,15,"_jsxFileName"],[109,28,106,15],[110,6,106,15,"lineNumber"],[110,16,106,15],[111,6,106,15,"columnNumber"],[111,18,106,15],[112,4,106,15],[112,11,107,26],[112,12,107,27],[113,2,109,0],[114,2,111,7],[114,11,111,16,"useAuth"],[114,18,111,23,"useAuth"],[114,19,111,23],[114,21,111,26],[115,4,112,2],[115,10,112,8,"context"],[115,17,112,15],[115,20,112,18],[115,24,112,18,"useContext"],[115,30,112,28],[115,31,112,28,"useContext"],[115,41,112,28],[115,43,112,29,"AuthContext"],[115,54,112,40],[115,55,112,41],[116,4,113,2],[116,8,113,6,"context"],[116,15,113,13],[116,20,113,18,"undefined"],[116,29,113,27],[116,31,113,29],[117,6,114,4],[117,12,114,10],[117,16,114,14,"Error"],[117,21,114,19],[117,22,114,20],[117,67,114,65],[117,68,114,66],[118,4,115,2],[119,4,116,2],[119,11,116,9,"context"],[119,18,116,16],[120,2,117,0],[121,0,117,1],[121,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","signup","logout","useAuth"],"mappings":"AAA;OCe;YCK;GDE;yBEE;GF8B;gBGE;GHc;iBIE;GJc;iBKE;GLa;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}