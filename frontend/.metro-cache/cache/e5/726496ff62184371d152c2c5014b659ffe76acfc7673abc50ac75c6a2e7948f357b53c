{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/base44Api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":57,"index":206}}],"key":"RsPhvxCr5uArxZjYXlgxcThRvjE=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesBase44Api = require(_dependencyMap[2], \"../services/base44Api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        console.log('[AuthContext] Loading stored auth...');\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          console.log('[AuthContext] Found stored auth, restoring session');\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n\n          // Optionally verify token by fetching current user\n          try {\n            const currentUser = await _servicesBase44Api.base44Auth.me();\n            if (currentUser) {\n              console.log('[AuthContext] Token verified, user:', currentUser.email);\n              setUser(currentUser);\n              await AsyncStorage.default.setItem('user', JSON.stringify(currentUser));\n            }\n          } catch (verifyError) {\n            console.log('[AuthContext] Token verification skipped/failed');\n          }\n        } else {\n          console.log('[AuthContext] No stored auth found');\n        }\n      } catch (error) {\n        console.error('[AuthContext] Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        console.log('[AuthContext] Attempting login for:', email);\n        const result = await _servicesBase44Api.base44Auth.login(email, password);\n        console.log('[AuthContext] Login successful');\n        setToken(result.token);\n        setUser(result.user);\n      } catch (error) {\n        console.error('[AuthContext] Login error:', error?.message || error);\n        throw error;\n      }\n    };\n    const signup = async (email, password, fullName, userType) => {\n      try {\n        console.log('[AuthContext] Attempting signup for:', email);\n        const result = await _servicesBase44Api.base44Auth.signup(email, password, fullName, userType);\n        console.log('[AuthContext] Signup successful');\n        setToken(result.token);\n        setUser(Object.assign({}, result.user, {\n          user_type: userType\n        }));\n      } catch (error) {\n        console.error('[AuthContext] Signup error:', error?.message || error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        console.log('[AuthContext] Logging out...');\n        await _servicesBase44Api.base44Auth.logout();\n        setToken(null);\n        setUser(null);\n        console.log('[AuthContext] Logged out successfully');\n      } catch (error) {\n        console.error('[AuthContext] Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        signup,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":129,"map":[[15,2,16,0,"exports"],[15,9,16,0],[15,10,16,0,"AuthProvider"],[15,22,16,0],[15,25,16,0,"AuthProvider"],[15,37,16,0],[16,2,111,0,"exports"],[16,9,111,0],[16,10,111,0,"useAuth"],[16,17,111,0],[16,20,111,0,"useAuth"],[16,27,111,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesBase44Api"],[20,24,3,0],[20,27,3,0,"require"],[20,34,3,0],[20,35,3,0,"_dependencyMap"],[20,49,3,0],[21,2,3,57],[21,6,3,57,"_reactJsxDevRuntime"],[21,25,3,57],[21,28,3,57,"require"],[21,35,3,57],[21,36,3,57,"_dependencyMap"],[21,50,3,57],[22,2,14,0],[22,8,14,6,"AuthContext"],[22,19,14,17],[22,35,14,20],[22,39,14,20,"createContext"],[22,45,14,33],[22,46,14,33,"createContext"],[22,59,14,33],[22,61,14,63,"undefined"],[22,70,14,72],[22,71,14,73],[23,2,16,7],[23,11,16,16,"AuthProvider"],[23,23,16,28,"AuthProvider"],[23,24,16,29],[24,4,16,31,"children"],[25,2,16,71],[25,3,16,72],[25,5,16,74],[26,4,16,74,"_s"],[26,6,16,74],[27,4,17,2],[27,10,17,8],[27,11,17,9,"user"],[27,15,17,13],[27,17,17,15,"setUser"],[27,24,17,22],[27,25,17,23],[27,28,17,26],[27,32,17,26,"useState"],[27,38,17,34],[27,39,17,34,"useState"],[27,47,17,34],[27,49,17,48],[27,53,17,52],[27,54,17,53],[28,4,18,2],[28,10,18,8],[28,11,18,9,"token"],[28,16,18,14],[28,18,18,16,"setToken"],[28,26,18,24],[28,27,18,25],[28,30,18,28],[28,34,18,28,"useState"],[28,40,18,36],[28,41,18,36,"useState"],[28,49,18,36],[28,51,18,52],[28,55,18,56],[28,56,18,57],[29,4,19,2],[29,10,19,8],[29,11,19,9,"loading"],[29,18,19,16],[29,20,19,18,"setLoading"],[29,30,19,28],[29,31,19,29],[29,34,19,32],[29,38,19,32,"useState"],[29,44,19,40],[29,45,19,40,"useState"],[29,53,19,40],[29,55,19,41],[29,59,19,45],[29,60,19,46],[30,4,21,2],[30,8,21,2,"useEffect"],[30,14,21,11],[30,15,21,11,"useEffect"],[30,24,21,11],[30,26,21,12],[30,32,21,18],[31,6,22,4,"loadStoredAuth"],[31,20,22,18],[31,21,22,19],[31,22,22,20],[32,4,23,2],[32,5,23,3],[32,7,23,5],[32,9,23,7],[32,10,23,8],[33,4,25,2],[33,10,25,8,"loadStoredAuth"],[33,24,25,22],[33,27,25,25],[33,33,25,25,"loadStoredAuth"],[33,34,25,25],[33,39,25,37],[34,6,26,4],[34,10,26,8],[35,8,27,6,"console"],[35,15,27,13],[35,16,27,14,"log"],[35,19,27,17],[35,20,27,18],[35,58,27,56],[35,59,27,57],[36,8,28,6],[36,14,28,12,"storedToken"],[36,25,28,23],[36,28,28,26],[36,34,28,32,"AsyncStorage"],[36,46,28,44],[36,47,28,44,"default"],[36,54,28,44],[36,55,28,45,"getItem"],[36,62,28,52],[36,63,28,53],[36,75,28,65],[36,76,28,66],[37,8,29,6],[37,14,29,12,"storedUser"],[37,24,29,22],[37,27,29,25],[37,33,29,31,"AsyncStorage"],[37,45,29,43],[37,46,29,43,"default"],[37,53,29,43],[37,54,29,44,"getItem"],[37,61,29,51],[37,62,29,52],[37,68,29,58],[37,69,29,59],[38,8,31,6],[38,12,31,10,"storedToken"],[38,23,31,21],[38,27,31,25,"storedUser"],[38,37,31,35],[38,39,31,37],[39,10,32,8,"console"],[39,17,32,15],[39,18,32,16,"log"],[39,21,32,19],[39,22,32,20],[39,74,32,72],[39,75,32,73],[40,10,33,8,"setToken"],[40,18,33,16],[40,19,33,17,"storedToken"],[40,30,33,28],[40,31,33,29],[41,10,34,8,"setUser"],[41,17,34,15],[41,18,34,16,"JSON"],[41,22,34,20],[41,23,34,21,"parse"],[41,28,34,26],[41,29,34,27,"storedUser"],[41,39,34,37],[41,40,34,38],[41,41,34,39],[43,10,36,8],[44,10,37,8],[44,14,37,12],[45,12,38,10],[45,18,38,16,"currentUser"],[45,29,38,27],[45,32,38,30],[45,38,38,36,"base44Auth"],[45,56,38,46],[45,57,38,46,"base44Auth"],[45,67,38,46],[45,68,38,47,"me"],[45,70,38,49],[45,71,38,50],[45,72,38,51],[46,12,39,10],[46,16,39,14,"currentUser"],[46,27,39,25],[46,29,39,27],[47,14,40,12,"console"],[47,21,40,19],[47,22,40,20,"log"],[47,25,40,23],[47,26,40,24],[47,63,40,61],[47,65,40,63,"currentUser"],[47,76,40,74],[47,77,40,75,"email"],[47,82,40,80],[47,83,40,81],[48,14,41,12,"setUser"],[48,21,41,19],[48,22,41,20,"currentUser"],[48,33,41,31],[48,34,41,32],[49,14,42,12],[49,20,42,18,"AsyncStorage"],[49,32,42,30],[49,33,42,30,"default"],[49,40,42,30],[49,41,42,31,"setItem"],[49,48,42,38],[49,49,42,39],[49,55,42,45],[49,57,42,47,"JSON"],[49,61,42,51],[49,62,42,52,"stringify"],[49,71,42,61],[49,72,42,62,"currentUser"],[49,83,42,73],[49,84,42,74],[49,85,42,75],[50,12,43,10],[51,10,44,8],[51,11,44,9],[51,12,44,10],[51,19,44,17,"verifyError"],[51,30,44,28],[51,32,44,30],[52,12,45,10,"console"],[52,19,45,17],[52,20,45,18,"log"],[52,23,45,21],[52,24,45,22],[52,73,45,71],[52,74,45,72],[53,10,46,8],[54,8,47,6],[54,9,47,7],[54,15,47,13],[55,10,48,8,"console"],[55,17,48,15],[55,18,48,16,"log"],[55,21,48,19],[55,22,48,20],[55,58,48,56],[55,59,48,57],[56,8,49,6],[57,6,50,4],[57,7,50,5],[57,8,50,6],[57,15,50,13,"error"],[57,20,50,18],[57,22,50,20],[58,8,51,6,"console"],[58,15,51,13],[58,16,51,14,"error"],[58,21,51,19],[58,22,51,20],[58,57,51,55],[58,59,51,57,"error"],[58,64,51,62],[58,65,51,63],[59,6,52,4],[59,7,52,5],[59,16,52,14],[60,8,53,6,"setLoading"],[60,18,53,16],[60,19,53,17],[60,24,53,22],[60,25,53,23],[61,6,54,4],[62,4,55,2],[62,5,55,3],[63,4,57,2],[63,10,57,8,"login"],[63,15,57,13],[63,18,57,16],[63,24,57,16,"login"],[63,25,57,23,"email"],[63,30,57,36],[63,32,57,38,"password"],[63,40,57,54],[63,45,57,59],[64,6,58,4],[64,10,58,8],[65,8,59,6,"console"],[65,15,59,13],[65,16,59,14,"log"],[65,19,59,17],[65,20,59,18],[65,57,59,55],[65,59,59,57,"email"],[65,64,59,62],[65,65,59,63],[66,8,61,6],[66,14,61,12,"result"],[66,20,61,18],[66,23,61,21],[66,29,61,27,"base44Auth"],[66,47,61,37],[66,48,61,37,"base44Auth"],[66,58,61,37],[66,59,61,38,"login"],[66,64,61,43],[66,65,61,44,"email"],[66,70,61,49],[66,72,61,51,"password"],[66,80,61,59],[66,81,61,60],[67,8,63,6,"console"],[67,15,63,13],[67,16,63,14,"log"],[67,19,63,17],[67,20,63,18],[67,52,63,50],[67,53,63,51],[68,8,65,6,"setToken"],[68,16,65,14],[68,17,65,15,"result"],[68,23,65,21],[68,24,65,22,"token"],[68,29,65,27],[68,30,65,28],[69,8,66,6,"setUser"],[69,15,66,13],[69,16,66,14,"result"],[69,22,66,20],[69,23,66,21,"user"],[69,27,66,25],[69,28,66,26],[70,6,67,4],[70,7,67,5],[70,8,67,6],[70,15,67,13,"error"],[70,20,67,23],[70,22,67,25],[71,8,68,6,"console"],[71,15,68,13],[71,16,68,14,"error"],[71,21,68,19],[71,22,68,20],[71,50,68,48],[71,52,68,50,"error"],[71,57,68,55],[71,59,68,57,"message"],[71,66,68,64],[71,70,68,68,"error"],[71,75,68,73],[71,76,68,74],[72,8,69,6],[72,14,69,12,"error"],[72,19,69,17],[73,6,70,4],[74,4,71,2],[74,5,71,3],[75,4,73,2],[75,10,73,8,"signup"],[75,16,73,14],[75,19,73,17],[75,25,73,17,"signup"],[75,26,73,24,"email"],[75,31,73,37],[75,33,73,39,"password"],[75,41,73,55],[75,43,73,57,"fullName"],[75,51,73,73],[75,53,73,75,"userType"],[75,61,73,92],[75,66,73,97],[76,6,74,4],[76,10,74,8],[77,8,75,6,"console"],[77,15,75,13],[77,16,75,14,"log"],[77,19,75,17],[77,20,75,18],[77,58,75,56],[77,60,75,58,"email"],[77,65,75,63],[77,66,75,64],[78,8,77,6],[78,14,77,12,"result"],[78,20,77,18],[78,23,77,21],[78,29,77,27,"base44Auth"],[78,47,77,37],[78,48,77,37,"base44Auth"],[78,58,77,37],[78,59,77,38,"signup"],[78,65,77,44],[78,66,77,45,"email"],[78,71,77,50],[78,73,77,52,"password"],[78,81,77,60],[78,83,77,62,"fullName"],[78,91,77,70],[78,93,77,72,"userType"],[78,101,77,80],[78,102,77,81],[79,8,79,6,"console"],[79,15,79,13],[79,16,79,14,"log"],[79,19,79,17],[79,20,79,18],[79,53,79,51],[79,54,79,52],[80,8,81,6,"setToken"],[80,16,81,14],[80,17,81,15,"result"],[80,23,81,21],[80,24,81,22,"token"],[80,29,81,27],[80,30,81,28],[81,8,82,6,"setUser"],[81,15,82,13],[81,16,82,13,"Object"],[81,22,82,13],[81,23,82,13,"assign"],[81,29,82,13],[81,34,82,19,"result"],[81,40,82,25],[81,41,82,26,"user"],[81,45,82,30],[82,10,82,32,"user_type"],[82,19,82,41],[82,21,82,43,"userType"],[83,8,82,51],[83,10,82,53],[83,11,82,54],[84,6,83,4],[84,7,83,5],[84,8,83,6],[84,15,83,13,"error"],[84,20,83,23],[84,22,83,25],[85,8,84,6,"console"],[85,15,84,13],[85,16,84,14,"error"],[85,21,84,19],[85,22,84,20],[85,51,84,49],[85,53,84,51,"error"],[85,58,84,56],[85,60,84,58,"message"],[85,67,84,65],[85,71,84,69,"error"],[85,76,84,74],[85,77,84,75],[86,8,85,6],[86,14,85,12,"error"],[86,19,85,17],[87,6,86,4],[88,4,87,2],[88,5,87,3],[89,4,89,2],[89,10,89,8,"logout"],[89,16,89,14],[89,19,89,17],[89,25,89,17,"logout"],[89,26,89,17],[89,31,89,29],[90,6,90,4],[90,10,90,8],[91,8,91,6,"console"],[91,15,91,13],[91,16,91,14,"log"],[91,19,91,17],[91,20,91,18],[91,50,91,48],[91,51,91,49],[92,8,93,6],[92,14,93,12,"base44Auth"],[92,32,93,22],[92,33,93,22,"base44Auth"],[92,43,93,22],[92,44,93,23,"logout"],[92,50,93,29],[92,51,93,30],[92,52,93,31],[93,8,95,6,"setToken"],[93,16,95,14],[93,17,95,15],[93,21,95,19],[93,22,95,20],[94,8,96,6,"setUser"],[94,15,96,13],[94,16,96,14],[94,20,96,18],[94,21,96,19],[95,8,98,6,"console"],[95,15,98,13],[95,16,98,14,"log"],[95,19,98,17],[95,20,98,18],[95,59,98,57],[95,60,98,58],[96,6,99,4],[96,7,99,5],[96,8,99,6],[96,15,99,13,"error"],[96,20,99,18],[96,22,99,20],[97,8,100,6,"console"],[97,15,100,13],[97,16,100,14,"error"],[97,21,100,19],[97,22,100,20],[97,51,100,49],[97,53,100,51,"error"],[97,58,100,56],[97,59,100,57],[98,6,101,4],[99,4,102,2],[99,5,102,3],[100,4,104,2],[100,24,105,4],[100,28,105,4,"_reactJsxDevRuntime"],[100,47,105,4],[100,48,105,4,"jsxDEV"],[100,54,105,4],[100,56,105,5,"AuthContext"],[100,67,105,16],[100,68,105,17,"Provider"],[100,76,105,25],[101,6,105,26,"value"],[101,11,105,31],[101,13,105,33],[102,8,105,35,"user"],[102,12,105,39],[103,8,105,41,"token"],[103,13,105,46],[104,8,105,48,"loading"],[104,15,105,55],[105,8,105,57,"login"],[105,13,105,62],[106,8,105,64,"signup"],[106,14,105,70],[107,8,105,72,"logout"],[108,6,105,79],[108,7,105,81],[109,6,105,81,"children"],[109,14,105,81],[109,16,106,7,"children"],[110,4,106,15],[111,6,106,15,"fileName"],[111,14,106,15],[111,16,106,15,"_jsxFileName"],[111,28,106,15],[112,6,106,15,"lineNumber"],[112,16,106,15],[113,6,106,15,"columnNumber"],[113,18,106,15],[114,4,106,15],[114,11,107,26],[114,12,107,27],[115,2,109,0],[116,2,109,1,"_s"],[116,4,109,1],[116,5,16,16,"AuthProvider"],[116,17,16,28],[117,2,16,28,"_c"],[117,4,16,28],[117,7,16,16,"AuthProvider"],[117,19,16,28],[118,2,111,7],[118,11,111,16,"useAuth"],[118,18,111,23,"useAuth"],[118,19,111,23],[118,21,111,26],[119,4,111,26,"_s2"],[119,7,111,26],[120,4,112,2],[120,10,112,8,"context"],[120,17,112,15],[120,20,112,18],[120,24,112,18,"useContext"],[120,30,112,28],[120,31,112,28,"useContext"],[120,41,112,28],[120,43,112,29,"AuthContext"],[120,54,112,40],[120,55,112,41],[121,4,113,2],[121,8,113,6,"context"],[121,15,113,13],[121,20,113,18,"undefined"],[121,29,113,27],[121,31,113,29],[122,6,114,4],[122,12,114,10],[122,16,114,14,"Error"],[122,21,114,19],[122,22,114,20],[122,67,114,65],[122,68,114,66],[123,4,115,2],[124,4,116,2],[124,11,116,9,"context"],[124,18,116,16],[125,2,117,0],[126,2,117,1,"_s2"],[126,5,117,1],[126,6,111,16,"useAuth"],[126,13,111,23],[127,2,111,23],[127,6,111,23,"_c"],[127,8,111,23],[128,2,111,23,"$RefreshReg$"],[128,14,111,23],[128,15,111,23,"_c"],[128,17,111,23],[129,0,111,23],[129,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","signup","logout","useAuth"],"mappings":"AAA;OCe;YCK;GDE;yBEE;GF8B;gBGE;GHc;iBIE;GJc;iBKE;GLa;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}