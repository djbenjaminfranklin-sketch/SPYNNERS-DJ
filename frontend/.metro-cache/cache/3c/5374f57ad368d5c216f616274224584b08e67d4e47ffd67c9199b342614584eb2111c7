{"dependencies":[{"name":"@base44/sdk","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":94},"end":{"line":6,"column":43,"index":137}}],"key":"wNgBXndTdvG5ox+7I3iZcRCWnC0=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":138},"end":{"line":7,"column":69,"index":207}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":208},"end":{"line":8,"column":26,"index":234}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":235},"end":{"line":9,"column":39,"index":274}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"getBase44Client\", {\n    enumerable: true,\n    get: function () {\n      return getBase44Client;\n    }\n  });\n  Object.defineProperty(exports, \"getBase44ClientSync\", {\n    enumerable: true,\n    get: function () {\n      return getBase44ClientSync;\n    }\n  });\n  Object.defineProperty(exports, \"invokeBase44Function\", {\n    enumerable: true,\n    get: function () {\n      return invokeBase44Function;\n    }\n  });\n  Object.defineProperty(exports, \"base44Client\", {\n    enumerable: true,\n    get: function () {\n      return base44Client;\n    }\n  });\n  var _base44Sdk = require(_dependencyMap[0], \"@base44/sdk\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[4], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * Base44 SDK Client for SPYNNERS\n   * Used for direct SDK calls like functions.invoke\n   */\n\n  // Base44 App ID for SPYNNERS\n  const BASE44_APP_ID = '691a4d96d819355b52c063f3';\n\n  // Backend proxy URL (to avoid CORS issues)\n  const getBackendUrl = () => {\n    if (false) {\n      return ''; // Relative URL for web (uses proxy)\n    }\n    return Constants.default.expoConfig?.extra?.backendUrl || process.env.EXPO_PUBLIC_BACKEND_URL || 'https://spynapp-1.preview.emergentagent.com';\n  };\n\n  // Storage key for auth token\n  const AUTH_TOKEN_KEY = 'auth_token';\n\n  // Get stored token\n  const getStoredToken = async () => {\n    try {\n      const token = await AsyncStorage.default.getItem(AUTH_TOKEN_KEY);\n      return token || undefined;\n    } catch (e) {\n      console.error('[Base44Client] Error getting stored token:', e);\n      return undefined;\n    }\n  };\n\n  // Create Base44 client (will be initialized with token when available)\n  let base44Client = null;\n\n  // Initialize or get the Base44 client\n  const getBase44Client = async () => {\n    const token = await getStoredToken();\n\n    // Always create a fresh client with current token\n    base44Client = (0, _base44Sdk.createClient)({\n      appId: BASE44_APP_ID,\n      token: token,\n      autoInitAuth: false\n    });\n    return base44Client;\n  };\n\n  // Get client synchronously (may not have token)\n  const getBase44ClientSync = () => {\n    if (!base44Client) {\n      base44Client = (0, _base44Sdk.createClient)({\n        appId: BASE44_APP_ID,\n        autoInitAuth: false\n      });\n    }\n    return base44Client;\n  };\n\n  // Wrapper for functions.invoke - uses backend proxy to avoid CORS on web, direct API on mobile\n  const invokeBase44Function = async (functionName, params = {}) => {\n    try {\n      const token = await getStoredToken();\n      console.log(`[Base44Client] Invoking function: ${functionName}`, params);\n      console.log(`[Base44Client] Token available: ${!!token}`);\n      console.log(`[Base44Client] Platform: ${Platform.default.OS}`);\n\n      // On mobile (iOS/Android), use direct Base44 API to avoid proxy issues\n      if (Platform.default.OS !== 'web') {\n        const directUrl = `https://app.base44.com/api/apps/${BASE44_APP_ID}/functions/invoke/${functionName}`;\n        console.log(`[Base44Client] Using direct API: ${directUrl}`);\n        const headers = {\n          'Content-Type': 'application/json'\n        };\n        if (token) {\n          headers['Authorization'] = `Bearer ${token}`;\n        }\n        const response = await axios.default.post(directUrl, params, {\n          headers,\n          timeout: 30000\n        });\n        console.log(`[Base44Client] Direct API response status:`, response.status);\n        return response.data;\n      }\n\n      // On web, use backend proxy to avoid CORS issues\n      const backendUrl = getBackendUrl();\n      const url = `${backendUrl}/api/base44/functions/invoke/${functionName}`;\n      console.log(`[Base44Client] Proxy URL: ${url}`);\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n      const response = await axios.default.post(url, params, {\n        headers,\n        timeout: 30000\n      });\n      console.log(`[Base44Client] Function ${functionName} response status:`, response.status);\n      console.log(`[Base44Client] Function ${functionName} result:`, response.data);\n      return response.data;\n    } catch (error) {\n      console.error(`[Base44Client] Error invoking ${functionName}:`, error?.response?.data || error?.message || error);\n      throw error;\n    }\n  };\n\n  // Export the base44 client getter\n\n  var _default = getBase44Client;\n});","lineCount":160,"map":[[12,2,131,0,"Object"],[12,8,131,0],[12,9,131,0,"defineProperty"],[12,23,131,0],[12,24,131,0,"exports"],[12,31,131,0],[13,4,131,0,"enumerable"],[13,14,131,0],[14,4,131,0,"get"],[14,7,131,0],[14,18,131,0,"get"],[14,19,131,0],[15,6,131,0],[15,13,131,0,"_default"],[15,21,131,0],[16,4,131,0],[17,2,131,0],[18,2,43,0,"Object"],[18,8,43,0],[18,9,43,0,"defineProperty"],[18,23,43,0],[18,24,43,0,"exports"],[18,31,43,0],[19,4,43,0,"enumerable"],[19,14,43,0],[20,4,43,0,"get"],[20,7,43,0],[20,18,43,0,"get"],[20,19,43,0],[21,6,43,0],[21,13,43,0,"getBase44Client"],[21,28,43,0],[22,4,43,0],[23,2,43,0],[24,2,57,0,"Object"],[24,8,57,0],[24,9,57,0,"defineProperty"],[24,23,57,0],[24,24,57,0,"exports"],[24,31,57,0],[25,4,57,0,"enumerable"],[25,14,57,0],[26,4,57,0,"get"],[26,7,57,0],[26,18,57,0,"get"],[26,19,57,0],[27,6,57,0],[27,13,57,0,"getBase44ClientSync"],[27,32,57,0],[28,4,57,0],[29,2,57,0],[30,2,68,0,"Object"],[30,8,68,0],[30,9,68,0,"defineProperty"],[30,23,68,0],[30,24,68,0,"exports"],[30,31,68,0],[31,4,68,0,"enumerable"],[31,14,68,0],[32,4,68,0,"get"],[32,7,68,0],[32,18,68,0,"get"],[32,19,68,0],[33,6,68,0],[33,13,68,0,"invokeBase44Function"],[33,33,68,0],[34,4,68,0],[35,2,68,0],[36,2,130,0,"Object"],[36,8,130,0],[36,9,130,0,"defineProperty"],[36,23,130,0],[36,24,130,0,"exports"],[36,31,130,0],[37,4,130,0,"enumerable"],[37,14,130,0],[38,4,130,0,"get"],[38,7,130,0],[38,18,130,0,"get"],[38,19,130,0],[39,6,130,0],[39,13,130,9,"base44Client"],[39,25,130,21],[40,4,130,21],[41,2,130,21],[42,2,6,0],[42,6,6,0,"_base44Sdk"],[42,16,6,0],[42,19,6,0,"require"],[42,26,6,0],[42,27,6,0,"_dependencyMap"],[42,41,6,0],[43,2,7,0],[43,6,7,0,"_reactNativeAsyncStorageAsyncStorage"],[43,42,7,0],[43,45,7,0,"require"],[43,52,7,0],[43,53,7,0,"_dependencyMap"],[43,67,7,0],[44,2,7,0],[44,6,7,0,"AsyncStorage"],[44,18,7,0],[44,21,7,0,"_interopDefault"],[44,36,7,0],[44,37,7,0,"_reactNativeAsyncStorageAsyncStorage"],[44,73,7,0],[45,2,8,0],[45,6,8,0,"_axios"],[45,12,8,0],[45,15,8,0,"require"],[45,22,8,0],[45,23,8,0,"_dependencyMap"],[45,37,8,0],[46,2,8,0],[46,6,8,0,"axios"],[46,11,8,0],[46,14,8,0,"_interopDefault"],[46,29,8,0],[46,30,8,0,"_axios"],[46,36,8,0],[47,2,9,0],[47,6,9,0,"_expoConstants"],[47,20,9,0],[47,23,9,0,"require"],[47,30,9,0],[47,31,9,0,"_dependencyMap"],[47,45,9,0],[48,2,9,0],[48,6,9,0,"Constants"],[48,15,9,0],[48,18,9,0,"_interopDefault"],[48,33,9,0],[48,34,9,0,"_expoConstants"],[48,48,9,0],[49,2,9,39],[49,6,9,39,"_reactNativeWebDistExportsPlatform"],[49,40,9,39],[49,43,9,39,"require"],[49,50,9,39],[49,51,9,39,"_dependencyMap"],[49,65,9,39],[50,2,9,39],[50,6,9,39,"Platform"],[50,14,9,39],[50,17,9,39,"_interopDefault"],[50,32,9,39],[50,33,9,39,"_reactNativeWebDistExportsPlatform"],[50,67,9,39],[51,2,1,0],[52,0,2,0],[53,0,3,0],[54,0,4,0],[56,2,12,0],[57,2,13,0],[57,8,13,6,"BASE44_APP_ID"],[57,21,13,19],[57,24,13,22],[57,50,13,48],[59,2,15,0],[60,2,16,0],[60,8,16,6,"getBackendUrl"],[60,21,16,19],[60,24,16,22,"getBackendUrl"],[60,25,16,22],[60,30,16,28],[61,4,17,2],[61,15,17,37],[62,6,18,4],[62,13,18,11],[62,15,18,13],[62,16,18,14],[62,17,18,15],[63,4,19,2],[64,4,20,2],[64,11,20,9,"Constants"],[64,20,20,18],[64,21,20,18,"default"],[64,28,20,18],[64,29,20,19,"expoConfig"],[64,39,20,29],[64,41,20,31,"extra"],[64,46,20,36],[64,48,20,38,"backendUrl"],[64,58,20,48],[64,62,21,9,"process"],[64,69,21,16],[64,70,21,17,"env"],[64,73,21,20],[64,74,21,21,"EXPO_PUBLIC_BACKEND_URL"],[64,97,21,44],[64,101,22,9],[64,191,22,99],[65,2,23,0],[65,3,23,1],[67,2,25,0],[68,2,26,0],[68,8,26,6,"AUTH_TOKEN_KEY"],[68,22,26,20],[68,25,26,23],[68,37,26,35],[70,2,28,0],[71,2,29,0],[71,8,29,6,"getStoredToken"],[71,22,29,20],[71,25,29,23],[71,31,29,23,"getStoredToken"],[71,32,29,23],[71,37,29,64],[72,4,30,2],[72,8,30,6],[73,6,31,4],[73,12,31,10,"token"],[73,17,31,15],[73,20,31,18],[73,26,31,24,"AsyncStorage"],[73,38,31,36],[73,39,31,36,"default"],[73,46,31,36],[73,47,31,37,"getItem"],[73,54,31,44],[73,55,31,45,"AUTH_TOKEN_KEY"],[73,69,31,59],[73,70,31,60],[74,6,32,4],[74,13,32,11,"token"],[74,18,32,16],[74,22,32,20,"undefined"],[74,31,32,29],[75,4,33,2],[75,5,33,3],[75,6,33,4],[75,13,33,11,"e"],[75,14,33,12],[75,16,33,14],[76,6,34,4,"console"],[76,13,34,11],[76,14,34,12,"error"],[76,19,34,17],[76,20,34,18],[76,64,34,62],[76,66,34,64,"e"],[76,67,34,65],[76,68,34,66],[77,6,35,4],[77,13,35,11,"undefined"],[77,22,35,20],[78,4,36,2],[79,2,37,0],[79,3,37,1],[81,2,39,0],[82,2,40,0],[82,6,40,4,"base44Client"],[82,18,40,56],[82,21,40,59],[82,25,40,63],[84,2,42,0],[85,2,43,7],[85,8,43,13,"getBase44Client"],[85,23,43,28],[85,26,43,31],[85,32,43,31,"getBase44Client"],[85,33,43,31],[85,38,43,43],[86,4,44,2],[86,10,44,8,"token"],[86,15,44,13],[86,18,44,16],[86,24,44,22,"getStoredToken"],[86,38,44,36],[86,39,44,37],[86,40,44,38],[88,4,46,2],[89,4,47,2,"base44Client"],[89,16,47,14],[89,19,47,17],[89,23,47,17,"createClient"],[89,33,47,29],[89,34,47,29,"createClient"],[89,46,47,29],[89,48,47,30],[90,6,48,4,"appId"],[90,11,48,9],[90,13,48,11,"BASE44_APP_ID"],[90,26,48,24],[91,6,49,4,"token"],[91,11,49,9],[91,13,49,11,"token"],[91,18,49,16],[92,6,50,4,"autoInitAuth"],[92,18,50,16],[92,20,50,18],[93,4,51,2],[93,5,51,3],[93,6,51,4],[94,4,53,2],[94,11,53,9,"base44Client"],[94,23,53,21],[95,2,54,0],[95,3,54,1],[97,2,56,0],[98,2,57,7],[98,8,57,13,"getBase44ClientSync"],[98,27,57,32],[98,30,57,35,"getBase44ClientSync"],[98,31,57,35],[98,36,57,41],[99,4,58,2],[99,8,58,6],[99,9,58,7,"base44Client"],[99,21,58,19],[99,23,58,21],[100,6,59,4,"base44Client"],[100,18,59,16],[100,21,59,19],[100,25,59,19,"createClient"],[100,35,59,31],[100,36,59,31,"createClient"],[100,48,59,31],[100,50,59,32],[101,8,60,6,"appId"],[101,13,60,11],[101,15,60,13,"BASE44_APP_ID"],[101,28,60,26],[102,8,61,6,"autoInitAuth"],[102,20,61,18],[102,22,61,20],[103,6,62,4],[103,7,62,5],[103,8,62,6],[104,4,63,2],[105,4,64,2],[105,11,64,9,"base44Client"],[105,23,64,21],[106,2,65,0],[106,3,65,1],[108,2,67,0],[109,2,68,7],[109,8,68,13,"invokeBase44Function"],[109,28,68,33],[109,31,68,36],[109,37,68,36,"invokeBase44Function"],[109,38,69,2,"functionName"],[109,50,69,22],[109,52,70,2,"params"],[109,58,70,29],[109,61,70,32],[109,62,70,33],[109,63,70,34],[109,68,71,17],[110,4,72,2],[110,8,72,6],[111,6,73,4],[111,12,73,10,"token"],[111,17,73,15],[111,20,73,18],[111,26,73,24,"getStoredToken"],[111,40,73,38],[111,41,73,39],[111,42,73,40],[112,6,75,4,"console"],[112,13,75,11],[112,14,75,12,"log"],[112,17,75,15],[112,18,75,16],[112,55,75,53,"functionName"],[112,67,75,65],[112,69,75,67],[112,71,75,69,"params"],[112,77,75,75],[112,78,75,76],[113,6,76,4,"console"],[113,13,76,11],[113,14,76,12,"log"],[113,17,76,15],[113,18,76,16],[113,53,76,51],[113,54,76,52],[113,55,76,53,"token"],[113,60,76,58],[113,62,76,60],[113,63,76,61],[114,6,77,4,"console"],[114,13,77,11],[114,14,77,12,"log"],[114,17,77,15],[114,18,77,16],[114,46,77,44,"Platform"],[114,54,77,52],[114,55,77,52,"default"],[114,62,77,52],[114,63,77,53,"OS"],[114,65,77,55],[114,67,77,57],[114,68,77,58],[116,6,79,4],[117,6,80,4],[117,10,80,8,"Platform"],[117,18,80,16],[117,19,80,16,"default"],[117,26,80,16],[117,27,80,17,"OS"],[117,29,80,19],[117,34,80,24],[117,39,80,29],[117,41,80,31],[118,8,81,6],[118,14,81,12,"directUrl"],[118,23,81,21],[118,26,81,24],[118,61,81,59,"BASE44_APP_ID"],[118,74,81,72],[118,95,81,93,"functionName"],[118,107,81,105],[118,109,81,107],[119,8,82,6,"console"],[119,15,82,13],[119,16,82,14,"log"],[119,19,82,17],[119,20,82,18],[119,56,82,54,"directUrl"],[119,65,82,63],[119,67,82,65],[119,68,82,66],[120,8,84,6],[120,14,84,12,"headers"],[120,21,84,43],[120,24,84,46],[121,10,85,8],[121,24,85,22],[121,26,85,24],[122,8,86,6],[122,9,86,7],[123,8,88,6],[123,12,88,10,"token"],[123,17,88,15],[123,19,88,17],[124,10,89,8,"headers"],[124,17,89,15],[124,18,89,16],[124,33,89,31],[124,34,89,32],[124,37,89,35],[124,47,89,45,"token"],[124,52,89,50],[124,54,89,52],[125,8,90,6],[126,8,92,6],[126,14,92,12,"response"],[126,22,92,20],[126,25,92,23],[126,31,92,29,"axios"],[126,36,92,34],[126,37,92,34,"default"],[126,44,92,34],[126,45,92,35,"post"],[126,49,92,39],[126,50,92,40,"directUrl"],[126,59,92,49],[126,61,92,51,"params"],[126,67,92,57],[126,69,92,59],[127,10,93,8,"headers"],[127,17,93,15],[128,10,94,8,"timeout"],[128,17,94,15],[128,19,94,17],[129,8,95,6],[129,9,95,7],[129,10,95,8],[130,8,97,6,"console"],[130,15,97,13],[130,16,97,14,"log"],[130,19,97,17],[130,20,97,18],[130,64,97,62],[130,66,97,64,"response"],[130,74,97,72],[130,75,97,73,"status"],[130,81,97,79],[130,82,97,80],[131,8,98,6],[131,15,98,13,"response"],[131,23,98,21],[131,24,98,22,"data"],[131,28,98,26],[132,6,99,4],[134,6,101,4],[135,6,102,4],[135,12,102,10,"backendUrl"],[135,22,102,20],[135,25,102,23,"getBackendUrl"],[135,38,102,36],[135,39,102,37],[135,40,102,38],[136,6,103,4],[136,12,103,10,"url"],[136,15,103,13],[136,18,103,16],[136,21,103,19,"backendUrl"],[136,31,103,29],[136,63,103,61,"functionName"],[136,75,103,73],[136,77,103,75],[137,6,104,4,"console"],[137,13,104,11],[137,14,104,12,"log"],[137,17,104,15],[137,18,104,16],[137,47,104,45,"url"],[137,50,104,48],[137,52,104,50],[137,53,104,51],[138,6,106,4],[138,12,106,10,"headers"],[138,19,106,41],[138,22,106,44],[139,8,107,6],[139,22,107,20],[139,24,107,22],[140,6,108,4],[140,7,108,5],[141,6,110,4],[141,10,110,8,"token"],[141,15,110,13],[141,17,110,15],[142,8,111,6,"headers"],[142,15,111,13],[142,16,111,14],[142,31,111,29],[142,32,111,30],[142,35,111,33],[142,45,111,43,"token"],[142,50,111,48],[142,52,111,50],[143,6,112,4],[144,6,114,4],[144,12,114,10,"response"],[144,20,114,18],[144,23,114,21],[144,29,114,27,"axios"],[144,34,114,32],[144,35,114,32,"default"],[144,42,114,32],[144,43,114,33,"post"],[144,47,114,37],[144,48,114,38,"url"],[144,51,114,41],[144,53,114,43,"params"],[144,59,114,49],[144,61,114,51],[145,8,115,6,"headers"],[145,15,115,13],[146,8,116,6,"timeout"],[146,15,116,13],[146,17,116,15],[147,6,117,4],[147,7,117,5],[147,8,117,6],[148,6,119,4,"console"],[148,13,119,11],[148,14,119,12,"log"],[148,17,119,15],[148,18,119,16],[148,45,119,43,"functionName"],[148,57,119,55],[148,76,119,74],[148,78,119,76,"response"],[148,86,119,84],[148,87,119,85,"status"],[148,93,119,91],[148,94,119,92],[149,6,120,4,"console"],[149,13,120,11],[149,14,120,12,"log"],[149,17,120,15],[149,18,120,16],[149,45,120,43,"functionName"],[149,57,120,55],[149,67,120,65],[149,69,120,67,"response"],[149,77,120,75],[149,78,120,76,"data"],[149,82,120,80],[149,83,120,81],[150,6,122,4],[150,13,122,11,"response"],[150,21,122,19],[150,22,122,20,"data"],[150,26,122,24],[151,4,123,2],[151,5,123,3],[151,6,123,4],[151,13,123,11,"error"],[151,18,123,21],[151,20,123,23],[152,6,124,4,"console"],[152,13,124,11],[152,14,124,12,"error"],[152,19,124,17],[152,20,124,18],[152,53,124,51,"functionName"],[152,65,124,63],[152,68,124,66],[152,70,124,68,"error"],[152,75,124,73],[152,77,124,75,"response"],[152,85,124,83],[152,87,124,85,"data"],[152,91,124,89],[152,95,124,93,"error"],[152,100,124,98],[152,102,124,100,"message"],[152,109,124,107],[152,113,124,111,"error"],[152,118,124,116],[152,119,124,117],[153,6,125,4],[153,12,125,10,"error"],[153,17,125,15],[154,4,126,2],[155,2,127,0],[155,3,127,1],[157,2,129,0],[159,2,131,0],[159,6,131,0,"_default"],[159,14,131,0],[159,17,131,15,"getBase44Client"],[159,32,131,30],[160,0,131,31],[160,3]],"functionMap":{"names":["<global>","getBackendUrl","getStoredToken","getBase44Client","getBase44ClientSync","invokeBase44Function"],"mappings":"AAA;sBCe;CDO;uBEM;CFQ;+BGM;CHW;mCIG;CJQ;oCKG;CL2D"},"hasCjsExports":false},"type":"js/module"}]}